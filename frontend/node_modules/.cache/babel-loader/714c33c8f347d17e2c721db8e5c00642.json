{"remainingRequest":"/workspaces/WEB_SONAGI-ON_updraft/frontend/node_modules/babel-loader/lib/index.js!/workspaces/WEB_SONAGI-ON_updraft/frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/workspaces/WEB_SONAGI-ON_updraft/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/workspaces/WEB_SONAGI-ON_updraft/frontend/src/components/Profile.vue?vue&type=script&lang=js&","dependencies":[{"path":"/workspaces/WEB_SONAGI-ON_updraft/frontend/src/components/Profile.vue","mtime":1634292491593},{"path":"/workspaces/WEB_SONAGI-ON_updraft/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/workspaces/WEB_SONAGI-ON_updraft/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/workspaces/WEB_SONAGI-ON_updraft/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/workspaces/WEB_SONAGI-ON_updraft/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL3dvcmtzcGFjZXMvV0VCX1NPTkFHSS1PTl91cGRyYWZ0L2Zyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgbWFwU3RhdGUsIG1hcEFjdGlvbnMgfSBmcm9tICd2dWV4JzsKaW1wb3J0IExvZ2luRGlhbG9nIGZyb20gJy4vTG9naW5EaWFsb2cudnVlJzsKaW1wb3J0IFJlZ2lzdGVyIGZyb20gJy4vUmVnaXN0ZXIudnVlJzsKaW1wb3J0IFVzZXJTZXR0aW5nIGZyb20gJy4vVXNlclNldHRpbmcudnVlJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdQcm9maWxlJywKICBjb21wb25lbnRzOiB7CiAgICBMb2dpbkRpYWxvZzogTG9naW5EaWFsb2csCiAgICBSZWdpc3RlcjogUmVnaXN0ZXIsCiAgICBVc2VyU2V0dGluZzogVXNlclNldHRpbmcKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB1c2VyZGF0YTogewogICAgICAgICJuaWNrbmFtZSI6ICLrrLTrqoUiLAogICAgICAgICJyYW5rIjogIuqyjOyKpO2KuCIKICAgICAgfQogICAgfTsKICB9LAogIGNvbXB1dGVkOiBfb2JqZWN0U3ByZWFkKHt9LCBtYXBTdGF0ZShbJ2lzTG9naW4nLCAnYWNjZXNzX3Rva2VuJywgJ3JlZnJlc2hfdG9rZW4nXSkpLAogIG1ldGhvZHM6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgbWFwQWN0aW9ucyhbJ2xvZ291dCddKSksIHt9LCB7CiAgICBpbml0UHJvZmlsZTogZnVuY3Rpb24gaW5pdFByb2ZpbGUoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAodGhpcy5pc0xvZ2luKSB7CiAgICAgICAgdmFyIGNvbmZpZyA9IHsKICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiLmNvbmNhdCh0aGlzLmFjY2Vzc190b2tlbikKICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIHRoaXMuYXhpb3MuZ2V0KCIiLmNvbmNhdCh0aGlzLiRzdG9yZS5zdGF0ZS5CQUNLRU5EX1VSTCwgIi9hcGkvdXNlcnNldHRpbmcvZ2V0IiksIGNvbmZpZykudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICBfdGhpcy51c2VyZGF0YS5uaWNrbmFtZSA9IHJlcy5kYXRhLm5pY2tuYW1lOwogICAgICAgICAgdmFyIHByb21vdGlvbl9kYXRlcyA9IFtuZXcgRGF0ZShyZXMuZGF0YS5wcm9tb3Rpb24xX2RhdGUpLCBuZXcgRGF0ZShyZXMuZGF0YS5wcm9tb3Rpb24yX2RhdGUpLCBuZXcgRGF0ZShyZXMuZGF0YS5wcm9tb3Rpb24zX2RhdGUpXTsKICAgICAgICAgIHZhciB0b2RheSA9IG5ldyBEYXRlKCk7IC8vIHRvZG8gOiDrtoDsgqzqtIAsIOyepeq1kOyXkCDrjIDtlbTshJzrj4Qg64KY7YOA64K8IOyImCDsnojrj4TroZ0KCiAgICAgICAgICBpZiAocmVzLmRhdGEudHlwZSA9PT0gInNvbGRpZXIiKSB7CiAgICAgICAgICAgIHZhciByYW5rcyA9IFsi7J2067ORIiwgIuydvOuzkSIsICLsg4Hrs5EiLCAi67OR7J6lIl07CgogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb21vdGlvbl9kYXRlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRvZGF5LCBwcm9tb3Rpb25fZGF0ZXNbaV0pOwoKICAgICAgICAgICAgICBpZiAodG9kYXkgPCBwcm9tb3Rpb25fZGF0ZXNbaV0pIHsKICAgICAgICAgICAgICAgIF90aGlzLnVzZXJkYXRhLnJhbmsgPSByYW5rc1tpXTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlLmRhdGEuY29kZSA9PT0gInRva2VuX25vdF92YWxpZCIpIHsKICAgICAgICAgICAgX3RoaXMubG9nb3V0KCk7CgogICAgICAgICAgICBhbGVydCgi7IS47IWY7J20IOunjOujjOuQmOyXiOyKteuLiOuLpC4g64uk7IucIOuhnOq3uOyduCDtlbTso7zshLjsmpQuIik7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBfdGhpcy5sb2dvdXQoKTsKCiAgICAgICAgICAgIGFsZXJ0KCJbUEYwMDFdIOyYiOyDgey5mCDrqrvtlZwg7JeQ65+s6rCAIOuwnOyDne2WiOyKteuLiOuLpC4iKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnVzZXJkYXRhID0gewogICAgICAgICAgIm5pY2tuYW1lIjogIuustOuqhSIsCiAgICAgICAgICAicmFuayI6ICLqsozsiqTtirgiCiAgICAgICAgfTsKICAgICAgfQogICAgfQogIH0pLAogIHdhdGNoOiB7CiAgICBpc0xvZ2luOiBmdW5jdGlvbiBpc0xvZ2luKCkgewogICAgICB0aGlzLmluaXRQcm9maWxlKCk7CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5pbml0UHJvZmlsZSgpOwogIH0KfTs="},{"version":3,"sources":["Profile.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+CA,SAAA,QAAA,EAAA,UAAA,QAAA,MAAA;AACA,OAAA,WAAA,MAAA,mBAAA;AACA,OAAA,QAAA,MAAA,gBAAA;AACA,OAAA,WAAA,MAAA,mBAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,SADA;AAEA,EAAA,UAAA,EAAA;AACA,IAAA,WAAA,EAAA,WADA;AAEA,IAAA,QAAA,EAAA,QAFA;AAGA,IAAA,WAAA,EAAA;AAHA,GAFA;AAOA,EAAA,IAAA,EAAA;AAAA,WAAA;AACA,MAAA,QAAA,EAAA;AAAA,oBAAA,IAAA;AAAA,gBAAA;AAAA;AADA,KAAA;AAAA,GAPA;AAUA,EAAA,QAAA,oBACA,QAAA,CAAA,CAAA,SAAA,EAAA,cAAA,EAAA,eAAA,CAAA,CADA,CAVA;AAaA,EAAA,OAAA,kCACA,UAAA,CAAA,CAAA,QAAA,CAAA,CADA;AAEA,IAAA,WAAA,EAAA,uBAAA;AAAA;;AACA,UAAA,KAAA,OAAA,EAAA;AACA,YAAA,MAAA,GAAA;AACA,UAAA,OAAA,EAAA;AACA,YAAA,aAAA,mBAAA,KAAA,YAAA;AADA;AADA,SAAA;AAKA,aAAA,KAAA,CAAA,GAAA,WAAA,KAAA,MAAA,CAAA,KAAA,CAAA,WAAA,2BAAA,MAAA,EACA,IADA,CACA,UAAA,GAAA,EAAA;AACA,UAAA,KAAA,CAAA,QAAA,CAAA,QAAA,GAAA,GAAA,CAAA,IAAA,CAAA,QAAA;AACA,cAAA,eAAA,GAAA,CAAA,IAAA,IAAA,CAAA,GAAA,CAAA,IAAA,CAAA,eAAA,CAAA,EACA,IAAA,IAAA,CAAA,GAAA,CAAA,IAAA,CAAA,eAAA,CADA,EAEA,IAAA,IAAA,CAAA,GAAA,CAAA,IAAA,CAAA,eAAA,CAFA,CAAA;AAGA,cAAA,KAAA,GAAA,IAAA,IAAA,EAAA,CALA,CAMA;;AACA,cAAA,GAAA,CAAA,IAAA,CAAA,IAAA,KAAA,SAAA,EAAA;AACA,gBAAA,KAAA,GAAA,CAAA,IAAA,EAAA,IAAA,EAAA,IAAA,EAAA,IAAA,CAAA;;AACA,iBAAA,IAAA,CAAA,GAAA,CAAA,EAAA,CAAA,GAAA,eAAA,CAAA,MAAA,EAAA,CAAA,EAAA,EAAA;AACA,cAAA,OAAA,CAAA,GAAA,CAAA,KAAA,EAAA,eAAA,CAAA,CAAA,CAAA;;AACA,kBAAA,KAAA,GAAA,eAAA,CAAA,CAAA,CAAA,EAAA;AACA,gBAAA,KAAA,CAAA,QAAA,CAAA,IAAA,GAAA,KAAA,CAAA,CAAA,CAAA;AACA;AACA;AACA;AACA;AACA,SAlBA,EAmBA,KAnBA,CAmBA,UAAA,KAAA,EAAA;AACA,cAAA,KAAA,CAAA,QAAA,CAAA,IAAA,CAAA,IAAA,KAAA,iBAAA,EAAA;AACA,YAAA,KAAA,CAAA,MAAA;;AACA,YAAA,KAAA,CAAA,2BAAA,CAAA;AACA,WAHA,MAGA;AACA,YAAA,KAAA,CAAA,MAAA;;AACA,YAAA,KAAA,CAAA,4BAAA,CAAA;AACA;AACA,SA3BA;AA4BA,OAlCA,MAkCA;AACA,aAAA,QAAA,GAAA;AAAA,sBAAA,IAAA;AAAA,kBAAA;AAAA,SAAA;AACA;AACA;AAxCA,IAbA;AAuDA,EAAA,KAAA,EAAA;AACA,IAAA,OAAA,EAAA,mBAAA;AACA,WAAA,WAAA;AACA;AAHA,GAvDA;AA4DA,EAAA,OA5DA,qBA4DA;AACA,SAAA,WAAA;AACA;AA9DA,CAAA","sourcesContent":["<template>\n   <v-card height=\"350px\" class=\"d-flex align-center justify-center\">\n      <v-list>\n         <v-list-item>\n            <v-icon size=150>mdi-account-circle</v-icon>\n         </v-list-item>\n         <v-list-item>\n            <v-list-item-content>\n               <v-list-item-title class=\"text-h5 d-flex align-center justify-center\">{{userdata.nickname}}</v-list-item-title>\n               <v-list-item-subtitle class=\"d-flex align-center justify-center\">{{userdata.rank}}</v-list-item-subtitle>\n            </v-list-item-content>\n         </v-list-item>\n         <v-list-item class=\"justify-center\">\n            <template v-if=\"!isLogin\">\n                <v-row>\n                  <v-col>\n                    <LoginDialog />\n                  </v-col>\n                  <v-col>\n                    <Register />\n                  </v-col>\n                </v-row>\n            </template>\n            <template v-else>\n              <v-row>\n                  <v-col>\n                    <UserSetting />\n                  </v-col>\n                  <v-col>\n                    <v-row justify=\"center\">\n                      <v-btn\n                          color=\"grey darken-2 white--text\"\n                          dark\n                          @click=\"logout()\"\n                      > \n                          로그아웃\n                      </v-btn>\n                    </v-row>\n                  </v-col>\n               </v-row>\n            </template>\n         </v-list-item>\n      </v-list>\n   </v-card>\n</template>\n\n<script>\nimport { mapState, mapActions } from 'vuex';\nimport LoginDialog from './LoginDialog.vue'\nimport Register from './Register.vue'\nimport UserSetting from './UserSetting.vue'\n\nexport default {\n  name: 'Profile',\n  components: { \n    LoginDialog,\n    Register,\n    UserSetting,\n  },\n  data: () => ({\n    userdata: {\"nickname\":\"무명\", \"rank\":\"게스트\"},\n  }),\n  computed: {\n    ...mapState(['isLogin', 'access_token', 'refresh_token']),\n  },\n  methods: {\n     ...mapActions(['logout']),\n     initProfile: function() {\n       if(this.isLogin){\n        const config = {\n          headers: {\n            Authorization: `Bearer ${this.access_token}`,\n          },\n        };\n        this.axios.get(`${this.$store.state.BACKEND_URL}/api/usersetting/get`, config)\n          .then((res) => {\n            this.userdata.nickname = res.data.nickname;\n            let promotion_dates = [new Date(res.data.promotion1_date), \n                                   new Date(res.data.promotion2_date), \n                                   new Date(res.data.promotion3_date)];\n            let today = new Date();\n            // todo : 부사관, 장교에 대해서도 나타낼 수 있도록\n            if(res.data.type === \"soldier\"){\n              let ranks = [\"이병\", \"일병\", \"상병\", \"병장\"];\n              for(let i = 0; i < promotion_dates.length; i++){\n                console.log(today, promotion_dates[i]);\n                if(today < promotion_dates[i]){\n                  this.userdata.rank = ranks[i]\n                  break;\n                }\n              }\n            }\n          })\n          .catch((error) => {\n            if(error.response.data.code === \"token_not_valid\"){\n              this.logout();\n              alert(\"세션이 만료되었습니다. 다시 로그인 해주세요.\");\n            } else {\n              this.logout();\n              alert(\"[PF001] 예상치 못한 에러가 발생했습니다.\")\n            }\n          })\n      } else {\n        this.userdata = {\"nickname\":\"무명\", \"rank\":\"게스트\"};\n      }\n     },\n  },\n  watch: {\n    isLogin: function() {\n      this.initProfile();\n    }\n  },\n  created() {\n    this.initProfile();\n  }\n}\n</script>"],"sourceRoot":"src/components"}]}