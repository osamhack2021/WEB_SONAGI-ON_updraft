{"remainingRequest":"/workspaces/WEB_SONAGI-ON_updraft/frontend/node_modules/babel-loader/lib/index.js!/workspaces/WEB_SONAGI-ON_updraft/frontend/node_modules/eslint-loader/index.js??ref--13-0!/workspaces/WEB_SONAGI-ON_updraft/frontend/src/store/index.js","dependencies":[{"path":"/workspaces/WEB_SONAGI-ON_updraft/frontend/src/store/index.js","mtime":1634449137149},{"path":"/workspaces/WEB_SONAGI-ON_updraft/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/workspaces/WEB_SONAGI-ON_updraft/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/workspaces/WEB_SONAGI-ON_updraft/frontend/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IFZ1ZXggZnJvbSAndnVleCc7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCBjcmVhdGVQZXJzaXN0ZWRTdGF0ZSBmcm9tICd2dWV4LXBlcnNpc3RlZHN0YXRlJzsgLy8gaW1wb3J0IHJvdXRlciBmcm9tICcuLi9yb3V0ZXInOwoKVnVlLnVzZShWdWV4KTsKZXhwb3J0IGRlZmF1bHQgbmV3IFZ1ZXguU3RvcmUoewogIHBsdWdpbnM6IFtjcmVhdGVQZXJzaXN0ZWRTdGF0ZSgpXSwKICBzdGF0ZTogewogICAgQkFDS0VORF9VUkw6ICdodHRwczovL3NvbmFnaS5ydW4uZ29vcm0uaW8nLAogICAgaXNMb2dpbjogZmFsc2UsCiAgICB1c2VyZGF0YToge30sCiAgICBhY2Nlc3NfdG9rZW46ICIiLAogICAgcmVmcmVzaF90b2tlbjogIiIKICB9LAogIG11dGF0aW9uczogewogICAgbG9naW5TdWNjZXNzOiBmdW5jdGlvbiBsb2dpblN1Y2Nlc3Moc3RhdGUsIHBheWxvYWQpIHsKICAgICAgLy8g66Gc6re47J24IOyEseqzteyLnCwKICAgICAgc3RhdGUuaXNMb2dpbiA9IHRydWU7CiAgICAgIHN0YXRlLmFjY2Vzc190b2tlbiA9IHBheWxvYWQuYWNjZXNzOwogICAgICBzdGF0ZS5yZWZyZXNoX3Rva2VuID0gcGF5bG9hZC5yZWZyZXNoOwogICAgfSwKICAgIHJlZnJlc2g6IGZ1bmN0aW9uIHJlZnJlc2goc3RhdGUsIHBheWxvYWQpIHsKICAgICAgc3RhdGUuYWNjZXNzX3Rva2VuID0gcGF5bG9hZDsKICAgIH0sCiAgICBsb2dvdXQ6IGZ1bmN0aW9uIGxvZ291dChzdGF0ZSkgewogICAgICAvLyDroZzqt7gg7JWE7JuD7IucLAogICAgICBzdGF0ZS5pc0xvZ2luID0gZmFsc2U7CiAgICAgIHN0YXRlLnVzZXJkYXRhID0ge307CiAgICAgIHN0YXRlLmFjY2Vzc190b2tlbiA9ICIiOwogICAgICBzdGF0ZS5yZWZyZXNoX3Rva2VuID0gIiI7CiAgICB9LAogICAgdXBkYXRlVXNlcmRhdGE6IGZ1bmN0aW9uIHVwZGF0ZVVzZXJkYXRhKHN0YXRlLCBwYXlsb2FkKSB7CiAgICAgIHN0YXRlLnVzZXJkYXRhID0gcGF5bG9hZDsKICAgIH0KICB9LAogIGFjdGlvbnM6IHsKICAgIGxvZ2luOiBmdW5jdGlvbiBsb2dpbihfcmVmLCBsb2dpbk9iaikgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYuY29tbWl0OwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIGF4aW9zLnBvc3QoIiIuY29uY2F0KF90aGlzLnN0YXRlLkJBQ0tFTkRfVVJMLCAiL2FwaS91c2VyL2xvZ2luIiksIGxvZ2luT2JqKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIGNvbW1pdCgnbG9naW5TdWNjZXNzJywgcmVzLmRhdGEpOwoKICAgICAgICAgIF90aGlzLmRpc3BhdGNoKCd1cGRhdGVVc2VyZGF0YScpOwoKICAgICAgICAgIHJlc29sdmUodHJ1ZSk7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgcmVqZWN0KHJlcy5kYXRhKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgcmVmcmVzaDogZnVuY3Rpb24gcmVmcmVzaChfcmVmMikgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciBjb21taXQgPSBfcmVmMi5jb21taXQ7CgogICAgICBpZiAodGhpcy5zdGF0ZS5pc0xvZ2luKSB7CiAgICAgICAgYXhpb3MucG9zdCgiIi5jb25jYXQodGhpcy5zdGF0ZS5CQUNLRU5EX1VSTCwgIi9hcGkvdXNlci9yZWZyZXNoIiksIHsKICAgICAgICAgICdyZWZyZXNoJzogdGhpcy5zdGF0ZS5yZWZyZXNoX3Rva2VuCiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICBjb21taXQoJ3JlZnJlc2gnLCByZXMuZGF0YS5hY2Nlc3MpOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIF90aGlzMi5kaXNwYXRjaCgnbG9nb3V0Jyk7CgogICAgICAgICAgX3RoaXMyLiRhbGVydCgi7IS47IWY7J20IOunjOujjOuQmOyXiOyKteuLiOuLpC4g64uk7IucIOuhnOq3uOyduCDtlbTso7zshLjsmpQuIiwgIiIsICJlcnJvciIpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgbG9nb3V0OiBmdW5jdGlvbiBsb2dvdXQoX3JlZjMpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYzLmNvbW1pdDsKICAgICAgY29tbWl0KCdsb2dvdXQnKTsKICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2FjY2Vzc190b2tlbicpOwogICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgncmVmcmVzaF90b2tlbicpOwogICAgfSwKICAgIHVwZGF0ZVVzZXJkYXRhOiBmdW5jdGlvbiB1cGRhdGVVc2VyZGF0YShfcmVmNCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHZhciBjb21taXQgPSBfcmVmNC5jb21taXQ7CiAgICAgIHZhciBjb25maWcgPSB7CiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiLmNvbmNhdCh0aGlzLnN0YXRlLmFjY2Vzc190b2tlbikKICAgICAgICB9CiAgICAgIH07CiAgICAgIGF4aW9zLmdldCgiIi5jb25jYXQodGhpcy5zdGF0ZS5CQUNLRU5EX1VSTCwgIi9hcGkvdXNlcnNldHRpbmcvZ2V0IiksIGNvbmZpZykudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgY29tbWl0KCd1cGRhdGVVc2VyZGF0YScsIHJlcy5kYXRhKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlLmRhdGEuY29kZSA9PT0gInRva2VuX25vdF92YWxpZCIpIHsKICAgICAgICAgIF90aGlzMy5kaXNwYXRjaCgnbG9nb3V0Jyk7CgogICAgICAgICAgX3RoaXMzLiRhbGVydCgi7IS47IWY7J20IOunjOujjOuQmOyXiOyKteuLiOuLpC4g64uk7IucIOuhnOq3uOyduCDtlbTso7zshLjsmpQuIiwgIiIsICJlcnJvciIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfdGhpczMuZGlzcGF0Y2goJ2xvZ291dCcpOwoKICAgICAgICAgIF90aGlzMy4kYWxlcnQoIltTVE9SRTAwMV0g7JiI7IOB7LmYIOuqu+2VnCDsl5Drn6zqsIAg67Cc7IOd7ZaI7Iq164uI64ukLiIsICIiLCAiZXJyb3IiKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0KfSk7"},{"version":3,"sources":["/workspaces/WEB_SONAGI-ON_updraft/frontend/src/store/index.js"],"names":["Vue","Vuex","axios","createPersistedState","use","Store","plugins","state","BACKEND_URL","isLogin","userdata","access_token","refresh_token","mutations","loginSuccess","payload","access","refresh","logout","updateUserdata","actions","login","loginObj","commit","Promise","resolve","reject","post","then","res","data","dispatch","catch","$alert","localStorage","removeItem","config","headers","Authorization","get","error","response","code"],"mappings":"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","sourcesContent":["import Vue from 'vue';\nimport Vuex from 'vuex';\nimport axios from 'axios';\nimport createPersistedState from 'vuex-persistedstate';\n// import router from '../router';\n\nVue.use(Vuex);\n\nexport default new Vuex.Store({\n  plugins: [\n    createPersistedState(),\n  ],\n  state: {\n    BACKEND_URL : 'https://sonagi.run.goorm.io',\n    isLogin: false,\n    userdata: {},\n    access_token: \"\",\n    refresh_token: \"\",\n  },\n  mutations: {\n    loginSuccess(state, payload) { // 로그인 성공시,\n      state.isLogin = true;\n      state.access_token = payload.access;\n      state.refresh_token = payload.refresh;\n    },\n    refresh(state, payload){\n      state.access_token = payload;\n    },\n    logout(state) { // 로그 아웃시,\n      state.isLogin = false;\n      state.userdata = {};\n      state.access_token = \"\";\n      state.refresh_token = \"\";\n    },\n    updateUserdata(state, payload){\n      state.userdata = payload;\n    },\n  },\n  actions: {\n    login({ commit }, loginObj) {\n      return new Promise((resolve, reject) => {\n        axios\n          .post(`${this.state.BACKEND_URL}/api/user/login`, loginObj)\n          .then((res) => {\n            commit('loginSuccess', res.data);\n            this.dispatch('updateUserdata');\n            resolve(true);\n          })\n          .catch((res) => {\n            reject(res.data);\n          });\n      })\n    },\n    refresh({ commit }){\n      if(this.state.isLogin){\n        axios\n          .post(`${this.state.BACKEND_URL}/api/user/refresh`, {'refresh' : this.state.refresh_token})\n          .then((res) => {\n            commit('refresh', res.data.access);\n          })\n          .catch(() => {\n            this.dispatch('logout');\n            this.$alert(\"세션이 만료되었습니다. 다시 로그인 해주세요.\",\"\",\"error\");\n          });\n      }\n    },\n    logout({ commit }) {\n      commit('logout');\n      localStorage.removeItem('access_token');\n      localStorage.removeItem('refresh_token');\n    },\n    updateUserdata({ commit }){\n      const config = {\n        headers: {\n          Authorization: `Bearer ${this.state.access_token}`,\n        },\n      };\n      axios.get(`${this.state.BACKEND_URL}/api/usersetting/get`, config)\n        .then((res) => {\n          commit('updateUserdata', res.data)\n        })\n        .catch((error) => {\n          if(error.response.data.code === \"token_not_valid\"){\n            this.dispatch('logout');\n            this.$alert(\"세션이 만료되었습니다. 다시 로그인 해주세요.\",\"\",\"error\");\n          } else {\n            this.dispatch('logout');\n            this.$alert(\"[STORE001] 예상치 못한 에러가 발생했습니다.\",\"\",\"error\");\n          }\n        })\n    }\n  },\n});"]}]}