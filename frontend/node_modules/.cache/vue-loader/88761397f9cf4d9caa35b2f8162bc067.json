{"remainingRequest":"/workspaces/WEB_SONAGI-ON_updraft/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/workspaces/WEB_SONAGI-ON_updraft/frontend/src/components/UserSetting.vue?vue&type=script&lang=js&","dependencies":[{"path":"/workspaces/WEB_SONAGI-ON_updraft/frontend/src/components/UserSetting.vue","mtime":1634292625247},{"path":"/workspaces/WEB_SONAGI-ON_updraft/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/workspaces/WEB_SONAGI-ON_updraft/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/workspaces/WEB_SONAGI-ON_updraft/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/workspaces/WEB_SONAGI-ON_updraft/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcFN0YXRlLCBtYXBBY3Rpb25zIH0gZnJvbSAndnVleCc7CmltcG9ydCBVc2VyU2V0dGluZ0RhdGVQaWNrZXIgZnJvbSAnLi9Vc2VyU2V0dGluZ0RhdGVQaWNrZXIudnVlJwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdVc2VyU2V0dGluZycsCiAgY29tcG9uZW50czogewogICAgVXNlclNldHRpbmdEYXRlUGlja2VyLAogIH0sCiAgLy8g7JWE656Y7JmAIOqwmeydgCDtmJXsi53snLzroZwgZGF0YeulvCDsjajslbwg7JWI7JeQ7IScIHRoaXPrpbwg7JO4IOyImCDsnojri6QuCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGRpYWxvZzogZmFsc2UsCiAgICAgIGVtYWlsOiAiIiwKICAgICAgcGFzc3dvcmQ6ICIiLAogICAgICBwYXNzd29yZDI6ICIiLAogICAgICBwYXNzd29yZFJ1bGVzMjogWwogICAgICAgIHYgPT4gdiA9PT0gdGhpcy5wYXNzd29yZCB8fCAn7Yyo7Iqk7JuM65Oc6rCAIOydvOy5mO2VmOyngCDslYrsirXri4jri6QuJywKICAgICAgXSwKICAgICAgbmlja25hbWU6ICIiLAogICAgICBuaWNrbmFtZVJ1bGVzOiBbCiAgICAgICAgdiA9PiB2Lmxlbmd0aCA+IDQgfHwgJ+uLieuEpOyehOydgCA07J6QIOydtOyDgeydtOyWtOyVvCDtlanri4jri6QuJywKICAgICAgICB2ID0+IHYubGVuZ3RoIDwgMTUgfHwgJ+uLieuEpOyehOydgCAxNeyekCDsnbTtlZjsl6zslbwg7ZWp64uI64ukLicsCiAgICAgIF0sCiAgICAgIG1ham9yOiB7IHN0YXRlOiAnJywgYWJicjogJycgfSwKICAgICAgbWFqb3JfaXRlbXM6IFsKICAgICAgICB7IHN0YXRlOiAn7Jyh6rWwJywgYWJicjogJ2FybXknIH0sCiAgICAgICAgeyBzdGF0ZTogJ+2VtOq1sCcsIGFiYnI6ICduYXZ5JyB9LAogICAgICAgIHsgc3RhdGU6ICfqs7XqtbAnLCBhYmJyOiAnYWlyJyB9LAogICAgICAgIHsgc3RhdGU6ICftlbTrs5HrjIAnLCBhYmJyOiAnbWFyaW5lJyB9LAogICAgICBdLAogICAgICB0eXBlOiB7IHN0YXRlOiAnJywgYWJicjogJycgfSwKICAgICAgdHlwZV9pdGVtczogWwogICAgICAgIHsgc3RhdGU6ICfsmqnsgqwnLCBhYmJyOiAnc29sZGllcicgfSwKICAgICAgICB7IHN0YXRlOiAn67aA7IKs6rSAJywgYWJicjogJ25jbycgfSwKICAgICAgICB7IHN0YXRlOiAn7J6l6rWQJywgYWJicjogJ29mZmljZXInIH0sCiAgICAgIF0sCiAgICAgIGVubGlzdGVkX2RhdGU6ICIyMDIxLTEwLTE0IiwKICAgICAgZGVsaXN0ZWRfZGF0ZTogIjIwMjEtMTAtMTgiLAogICAgICBwcm9tb3Rpb24xX2xhYmVsIDogIuydvOuzkSDsp4TquInsnbwiLAogICAgICBwcm9tb3Rpb24xX2RhdGU6ICIyMDIxLTEwLTE1IiwKICAgICAgcHJvbW90aW9uMl9sYWJlbCA6ICLsg4Hrs5Eg7KeE6riJ7J28IiwKICAgICAgcHJvbW90aW9uMl9kYXRlOiAiMjAyMS0xMC0xNiIsCiAgICAgIHByb21vdGlvbjNfbGFiZWwgOiAi67OR7J6lIOynhOq4ieydvCIsCiAgICAgIHByb21vdGlvbjNfZGF0ZTogIjIwMjEtMTAtMTciLAogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcFN0YXRlKFsnaXNMb2dpbicsICdhY2Nlc3NfdG9rZW4nLCAncmVmcmVzaF90b2tlbiddKSwKICB9LAogIG1ldGhvZHM6IHsKICAgIC4uLm1hcEFjdGlvbnMoWydsb2dvdXQnXSksCiAgICByZWZyZXNoSW5mbzogZnVuY3Rpb24oKXsKICAgICAgY29uc3QgY29uZmlnID0gewogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLmFjY2Vzc190b2tlbn1gLAogICAgICAgIH0sCiAgICAgIH07CiAgICAgIHRoaXMuYXhpb3MuZ2V0KGAke3RoaXMuJHN0b3JlLnN0YXRlLkJBQ0tFTkRfVVJMfS9hcGkvdXNlcnNldHRpbmcvZ2V0YCwgY29uZmlnKQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIHRoaXMuZW1haWwgPSByZXMuZGF0YS5lbWFpbDsKICAgICAgICAgIHRoaXMubmlja25hbWUgPSByZXMuZGF0YS5uaWNrbmFtZTsKICAgICAgICAgIHRoaXMubWFqb3IgPSB0aGlzLm1ham9yX2l0ZW1zLmZpbHRlcih2ID0+IHYuYWJiciA9PT0gcmVzLmRhdGEubWFqb3IpWzBdOwogICAgICAgICAgdGhpcy50eXBlID0gdGhpcy50eXBlX2l0ZW1zLmZpbHRlcih2ID0+IHYuYWJiciA9PT0gcmVzLmRhdGEudHlwZSlbMF07CiAgICAgICAgICB0aGlzLmVubGlzdGVkX2RhdGUgPSByZXMuZGF0YS5lbmxpc3RlZF9kYXRlOwogICAgICAgICAgdGhpcy5kZWxpc3RlZF9kYXRlID0gcmVzLmRhdGEuZGVsaXN0ZWRfZGF0ZTsKICAgICAgICAgIHRoaXMucHJvbW90aW9uMV9kYXRlID0gcmVzLmRhdGEucHJvbW90aW9uMV9kYXRlIDsKICAgICAgICAgIHRoaXMucHJvbW90aW9uMl9kYXRlID0gcmVzLmRhdGEucHJvbW90aW9uMl9kYXRlOwogICAgICAgICAgdGhpcy5wcm9tb3Rpb24zX2RhdGUgPSByZXMuZGF0YS5wcm9tb3Rpb24zX2RhdGUKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgIGlmKGVycm9yLnJlc3BvbnNlLmRhdGEuY29kZSA9PT0gInRva2VuX25vdF92YWxpZCIpewogICAgICAgICAgICB0aGlzLmxvZ291dCgpOwogICAgICAgICAgICBhbGVydCgi7IS47IWY7J20IOunjOujjOuQmOyXiOyKteuLiOuLpC4g64uk7IucIOuhnOq3uOyduCDtlbTso7zshLjsmpQuIik7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLmxvZ291dCgpOwogICAgICAgICAgICBhbGVydCgiW1BGMDAxXSDsmIjsg4HsuZgg66q77ZWcIOyXkOufrOqwgCDrsJzsg53tlojsirXri4jri6QuIikKICAgICAgICAgIH0KICAgICAgICB9KQogICAgfSwKICAgIHVwZGF0ZVNldHRpbmc6IGZ1bmN0aW9uKCl7CiAgICAgIGNvbnN0IGNvbmZpZyA9IHsKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy5hY2Nlc3NfdG9rZW59YCwKICAgICAgICB9LAogICAgICB9OwogICAgICBjb25zdCB1cGRhdGVPYmogPSB7Im5pY2tuYW1lIjp0aGlzLm5pY2tuYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgIm1ham9yIjp0aGlzLm1ham9yLmFiYnIsCiAgICAgICAgICAgICAgICAgICAgICAgICAidHlwZSI6dGhpcy50eXBlLmFiYnIsCiAgICAgICAgICAgICAgICAgICAgICAgICAiZW5saXN0ZWRfZGF0ZSI6dGhpcy5lbmxpc3RlZF9kYXRlLAogICAgICAgICAgICAgICAgICAgICAgICAgImRlbGlzdGVkX2RhdGUiOnRoaXMuZGVsaXN0ZWRfZGF0ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICJwcm9tb3Rpb24xX2RhdGUiOnRoaXMucHJvbW90aW9uMV9kYXRlLAogICAgICAgICAgICAgICAgICAgICAgICAgInByb21vdGlvbjJfZGF0ZSI6dGhpcy5wcm9tb3Rpb24yX2RhdGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAicHJvbW90aW9uM19kYXRlIjp0aGlzLnByb21vdGlvbjNfZGF0ZSx9CiAgICAgIHRoaXMuYXhpb3MucG9zdChgJHt0aGlzLiRzdG9yZS5zdGF0ZS5CQUNLRU5EX1VSTH0vYXBpL3VzZXJzZXR0aW5nL3JldmlzZWAsIHVwZGF0ZU9iaiwgY29uZmlnKQogICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgIGFsZXJ0KCLshLHqs7XsoIHsnLzroZwg67OA6rK965CY7JeI7Iq164uI64ukLiIpOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICAgIH0pCiAgICB9LAogICAgdXBkYXRlRGF0ZTogZnVuY3Rpb24oe3R5cGUsIG5ld0RhdGV9KXsKICAgICAgdGhpc1t0eXBlXSA9IG5ld0RhdGU7CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgZGlhbG9nOiBmdW5jdGlvbih2YWwpewogICAgICBpZiAodmFsKXsKICAgICAgICB0aGlzLnJlZnJlc2hJbmZvKCk7CiAgICAgIH0KICAgIH0sCiAgfQp9Cg=="},{"version":3,"sources":["UserSetting.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6IA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"UserSetting.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <v-row justify=\"center\">\n    <v-dialog\n      v-model=\"dialog\"\n      max-width=\"600px\"\n    >\n      <template v-slot:activator=\"{ on, attrs }\">\n        <v-btn\n          color=\"grey darken-2 white--text\"\n          dark\n          v-bind=\"attrs\"\n          v-on=\"on\"\n        >\n          설정\n        </v-btn>\n      </template>\n      <v-card>\n        <v-card-title>\n          <span class=\"text-h5\">설정</span>\n        </v-card-title>\n        <v-card-text>\n          <v-container>\n            <v-form ref=\"usersettingform\" lazy-validation>\n            <v-row>\n              <v-col cols=\"12\">\n                <v-text-field\n                  name=\"email\"\n                  label=\"이메일\"\n                  v-model=\"email\"\n                  readonly\n                ></v-text-field>\n              </v-col>\n              <v-col cols=\"12\">\n                <v-text-field\n                  name=\"password\"\n                  label=\"패스워드\"\n                  v-model=\"password\"\n                  type=\"password\"\n                ></v-text-field>\n              </v-col>\n              <v-col cols=\"12\">\n                <v-text-field\n                  name=\"password2\"\n                  label=\"패스워드 확인\"\n                  v-model=\"password2\"\n                  type=\"password\"\n                  :rules=\"passwordRules2\"\n                ></v-text-field>\n              </v-col>\n              <v-col cols=\"12\">\n                <v-text-field\n                  name=\"nickname\"\n                  label=\"닉네임\"\n                  v-model=\"nickname\"\n                  :rules=\"nicknameRules\"\n                ></v-text-field>\n              </v-col>\n              <v-col cols=\"6\">\n                <v-select\n                  v-model=\"major\"\n                  :items=\"major_items\"\n                  item-text=\"state\"\n                  item-value=\"abbr\"\n                  hint=\"군 구분\"\n                  persistent-hint\n                  return-object\n                  single-line\n                ></v-select>\n              </v-col>\n              <v-col cols=\"6\">\n                <v-select\n                  v-model=\"type\"\n                  :items=\"type_items\"\n                  item-text=\"state\"\n                  item-value=\"abbr\"\n                  hint=\"복무 형태\"\n                  persistent-hint\n                  return-object\n                  single-line\n                ></v-select>\n              </v-col>\n              <v-col cols=\"6\">\n                <UserSettingDatePicker\n                  type='enlisted_date'\n                  label='입대일'\n                  v-bind:propDate=\"enlisted_date\" \n                  @date-extract=\"updateDate\"\n                ></UserSettingDatePicker>\n              </v-col>\n              <v-col cols=\"6\">\n                <UserSettingDatePicker\n                  type='delisted_date'\n                  label='전역일'\n                  v-bind:propDate=\"delisted_date\" \n                  @date-extract=\"updateDate\"\n                ></UserSettingDatePicker>\n              </v-col>\n              <v-col cols=\"4\">\n                <UserSettingDatePicker\n                  type='promotion1_date'\n                  v-bind:label='promotion1_label'\n                  v-bind:propDate=\"promotion1_date\" \n                  @date-extract=\"updateDate\"\n                ></UserSettingDatePicker>\n              </v-col>\n              <v-col cols=\"4\">\n                <UserSettingDatePicker\n                  type='promotion2_date'\n                  v-bind:label='promotion2_label'\n                  v-bind:propDate=\"promotion2_date\" \n                  @date-extract=\"updateDate\"\n                ></UserSettingDatePicker>\n              </v-col>\n              <v-col cols=\"4\">\n                <UserSettingDatePicker\n                  type='promotion3_date'\n                  v-bind:label='promotion3_label'\n                  v-bind:propDate=\"promotion3_date\" \n                  @date-extract=\"updateDate\"\n                ></UserSettingDatePicker>\n              </v-col>\n            </v-row>\n            </v-form>\n          </v-container>\n        </v-card-text>\n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-btn\n            color=\"blue darken-1\"\n            text\n            @click=\"updateSetting()\"\n          >\n            변경\n          </v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n  </v-row>\n</template>\n\n<script>\nimport { mapState, mapActions } from 'vuex';\nimport UserSettingDatePicker from './UserSettingDatePicker.vue'\n\nexport default {\n  name: 'UserSetting',\n  components: {\n    UserSettingDatePicker,\n  },\n  // 아래와 같은 형식으로 data를 써야 안에서 this를 쓸 수 있다.\n  data() {\n    return {\n      dialog: false,\n      email: \"\",\n      password: \"\",\n      password2: \"\",\n      passwordRules2: [\n        v => v === this.password || '패스워드가 일치하지 않습니다.',\n      ],\n      nickname: \"\",\n      nicknameRules: [\n        v => v.length > 4 || '닉네임은 4자 이상이어야 합니다.',\n        v => v.length < 15 || '닉네임은 15자 이하여야 합니다.',\n      ],\n      major: { state: '', abbr: '' },\n      major_items: [\n        { state: '육군', abbr: 'army' },\n        { state: '해군', abbr: 'navy' },\n        { state: '공군', abbr: 'air' },\n        { state: '해병대', abbr: 'marine' },\n      ],\n      type: { state: '', abbr: '' },\n      type_items: [\n        { state: '용사', abbr: 'soldier' },\n        { state: '부사관', abbr: 'nco' },\n        { state: '장교', abbr: 'officer' },\n      ],\n      enlisted_date: \"2021-10-14\",\n      delisted_date: \"2021-10-18\",\n      promotion1_label : \"일병 진급일\",\n      promotion1_date: \"2021-10-15\",\n      promotion2_label : \"상병 진급일\",\n      promotion2_date: \"2021-10-16\",\n      promotion3_label : \"병장 진급일\",\n      promotion3_date: \"2021-10-17\",\n    }\n  },\n  computed: {\n    ...mapState(['isLogin', 'access_token', 'refresh_token']),\n  },\n  methods: {\n    ...mapActions(['logout']),\n    refreshInfo: function(){\n      const config = {\n        headers: {\n          Authorization: `Bearer ${this.access_token}`,\n        },\n      };\n      this.axios.get(`${this.$store.state.BACKEND_URL}/api/usersetting/get`, config)\n        .then((res) => {\n          this.email = res.data.email;\n          this.nickname = res.data.nickname;\n          this.major = this.major_items.filter(v => v.abbr === res.data.major)[0];\n          this.type = this.type_items.filter(v => v.abbr === res.data.type)[0];\n          this.enlisted_date = res.data.enlisted_date;\n          this.delisted_date = res.data.delisted_date;\n          this.promotion1_date = res.data.promotion1_date ;\n          this.promotion2_date = res.data.promotion2_date;\n          this.promotion3_date = res.data.promotion3_date\n        })\n        .catch((error) => {\n          if(error.response.data.code === \"token_not_valid\"){\n            this.logout();\n            alert(\"세션이 만료되었습니다. 다시 로그인 해주세요.\");\n          } else {\n            this.logout();\n            alert(\"[PF001] 예상치 못한 에러가 발생했습니다.\")\n          }\n        })\n    },\n    updateSetting: function(){\n      const config = {\n        headers: {\n          Authorization: `Bearer ${this.access_token}`,\n        },\n      };\n      const updateObj = {\"nickname\":this.nickname,\n                         \"major\":this.major.abbr,\n                         \"type\":this.type.abbr,\n                         \"enlisted_date\":this.enlisted_date,\n                         \"delisted_date\":this.delisted_date,\n                         \"promotion1_date\":this.promotion1_date,\n                         \"promotion2_date\":this.promotion2_date,\n                         \"promotion3_date\":this.promotion3_date,}\n      this.axios.post(`${this.$store.state.BACKEND_URL}/api/usersetting/revise`, updateObj, config)\n        .then(() => {\n          alert(\"성공적으로 변경되었습니다.\");\n        })\n        .catch((error) => {\n          console.log(error);\n        })\n    },\n    updateDate: function({type, newDate}){\n      this[type] = newDate;\n    }\n  },\n  watch: {\n    dialog: function(val){\n      if (val){\n        this.refreshInfo();\n      }\n    },\n  }\n}\n</script>"]}]}