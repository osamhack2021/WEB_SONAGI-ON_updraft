{"remainingRequest":"/workspaces/WEB_SONAGI-ON_updraft/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/workspaces/WEB_SONAGI-ON_updraft/frontend/src/views/Diary.vue?vue&type=script&lang=js&","dependencies":[{"path":"/workspaces/WEB_SONAGI-ON_updraft/frontend/src/views/Diary.vue","mtime":1634648827355},{"path":"/workspaces/WEB_SONAGI-ON_updraft/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1634648816471},{"path":"/workspaces/WEB_SONAGI-ON_updraft/frontend/node_modules/babel-loader/lib/index.js","mtime":1634648816471},{"path":"/workspaces/WEB_SONAGI-ON_updraft/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1634648816471},{"path":"/workspaces/WEB_SONAGI-ON_updraft/frontend/node_modules/vue-loader/lib/index.js","mtime":1634648814815}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEFjdGlvbnMsIG1hcFN0YXRlIH0gZnJvbSAndnVleCcKaW1wb3J0IFRpbWVsaW5lIGZyb20gJy4uL2NvbXBvbmVudHMvVGltZWxpbmUnCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0hvbWUnLAogIGNvbXBvbmVudHM6IHsKICAgIFRpbWVsaW5lCiAgfSwKICBkYXRhOiAoKT0+ICh7CiAgICBiY0xpbms6IFsKICAgICAgICAgIHsKICAgICAgICAgICAgdGV4dDogJ+uMgOyLnOuztOuTnCcsCiAgICAgICAgICAgIGRpc2FibGVkOiBmYWxzZSwKICAgICAgICAgICAgaHJlZjogJy8nLAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgdGV4dDogJ+ydvOq4sCcsCiAgICAgICAgICAgIGRpc2FibGVkOiBmYWxzZSwKICAgICAgICAgICAgaHJlZjogJ0RpYXJ5JywKICAgICAgICAgIH0sCiAgICAgICAgXSwKICAgIGRpYXJ5TW9udGg6IFtdLAogICAgZGlhcnlEYXRhOiB7fSwKICAgIGlzTG9hZGVkOiBmYWxzZSwKICB9KSwKICBjb21wdXRlZDogewogICAgLi4ubWFwU3RhdGUoWydpc0xvZ2luJywgJ2FjY2Vzc190b2tlbiddKSwKICB9LAogIG1ldGhvZHM6IHsKICAgIC4uLm1hcEFjdGlvbnMoWydsb2dvdXQnXSksCiAgICBpbml0VGltZWxpbmU6IGZ1bmN0aW9uKCl7CiAgICAgIHRoaXMuZGlhcnlNb250aCA9IFtdOwogICAgICB0aGlzLmRpYXJ5RGF0YSA9IHt9OwogICAgICB0aGlzLmlzTG9hZGVkID0gZmFsc2U7CiAgICAgIGlmKCF0aGlzLmlzTG9naW4pewogICAgICAgIHRoaXMuJGFsZXJ0KCLroZzqt7jsnbjsnbQg7ZWE7JqU7ZWcIO2OmOydtOyngOyeheuLiOuLpC4iLCIiLCJ3YXJuaW5nIik7CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy8nKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zdCBjb25maWcgPSB7CiAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLmFjY2Vzc190b2tlbn1gLAogICAgICAgICAgfSwKICAgICAgICB9OwogICAgICAgIHRoaXMuYXhpb3MKICAgICAgICAgIC5nZXQoYCR7dGhpcy4kc3RvcmUuc3RhdGUuQkFDS0VORF9VUkx9L2FwaS9kaWFyeS9saXN0YCwgY29uZmlnKQogICAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgICBsZXQgbW9udGh5ZWFyID0gW107CiAgICAgICAgICAgIGxldCBzb3J0ZWRfZGF0YSA9IHJlcy5kYXRhLnNvcnQoKGEsYikgPT4gewogICAgICAgICAgICAgIGEgPSBuZXcgRGF0ZShhLndyaXRlX2RhdGUpOwogICAgICAgICAgICAgIGIgPSBuZXcgRGF0ZShiLndyaXRlX2RhdGUpOwogICAgICAgICAgICAgIHJldHVybiBhIDwgYiA/IDEgOiAtMTsKICAgICAgICAgICAgfSkKICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHNvcnRlZF9kYXRhLmxlbmd0aDsgaSsrKXsKICAgICAgICAgICAgICBsZXQgdG1wID0gc29ydGVkX2RhdGFbaV1bJ3dyaXRlX2RhdGUnXS5zcGxpdCgnLScpOwogICAgICAgICAgICAgIHRtcCA9IHRtcFswXSArICIsICIgKyB0bXBbMV0gKyAi7JuUIjsKICAgICAgICAgICAgICBpZiAodG1wIGluIHRoaXMuZGlhcnlEYXRhKXsKICAgICAgICAgICAgICAgIHRoaXMuZGlhcnlEYXRhW3RtcF0ucHVzaChzb3J0ZWRfZGF0YVtpXSk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMuZGlhcnlEYXRhW3RtcF0gPSBbc29ydGVkX2RhdGFbaV1dOwogICAgICAgICAgICAgICAgdG1wID0gIiMiK3RtcDsKICAgICAgICAgICAgICAgIG1vbnRoeWVhci5wdXNoKHRtcCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMuZGlhcnlNb250aCA9IG1vbnRoeWVhcjsKICAgICAgICAgICAgdGhpcy5pc0xvYWRlZCA9IHRydWU7CiAgICAgICAgICB9KQogICAgICAgICAgLmNhdGNoKCgpID0+IHsKICAgICAgICAgICAgdGhpcy5sb2dvdXQoKTsKICAgICAgICAgICAgdGhpcy4kYWxlcnQoIuyEuOyFmOydtCDrp4zro4zrkJjsl4jsirXri4jri6QuIOuLpOyLnCDroZzqt7jsnbgg7ZW07KO87IS47JqULiIsIiIsImVycm9yIik7CiAgICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuaW5pdFRpbWVsaW5lKCk7CiAgfSwKfQo="},{"version":3,"sources":["Diary.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Diary.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <v-card class=\"group pa-2\">\n      <v-icon small style=\"margin-left:5px\">home</v-icon>\n      <v-breadcrumbs :items=\"bcLink\"></v-breadcrumbs>\n    </v-card>\n    <v-layout>\n      <v-flex xs2 sm2 md2 lg2 xl2>\n      <v-card>\n      </v-card>\n      </v-flex>\n    <Timeline\n      v-if=\"isLoaded\"\n      :diaryData=\"diaryData\"\n      @reload=\"initTimeline\"\n    >\n    </Timeline>\n    <v-flex xs2 sm2 md2 lg2 xl2 shrink>\n    <v-card class=\"mt-10\" style=\"position: fixed;\">\n      <v-subheader class=\"grey darken-3 white--text\" style=\"text-align: center;\">Quick List</v-subheader>\n      <v-list>    \n        <v-list-item v-for=\"item in diaryMonth\" :key=\"item\" v-bind:href=item style=\"text-align: center;\">{{item.slice(1)}}\n        </v-list-item>\n      </v-list>\n    </v-card>\n    </v-flex>\n    </v-layout>\n  </div>\n</template>\n\n<script>\nimport { mapActions, mapState } from 'vuex'\nimport Timeline from '../components/Timeline'\n\nexport default {\n  name: 'Home',\n  components: {\n    Timeline\n  },\n  data: ()=> ({\n    bcLink: [\n          {\n            text: '대시보드',\n            disabled: false,\n            href: '/',\n          },\n          {\n            text: '일기',\n            disabled: false,\n            href: 'Diary',\n          },\n        ],\n    diaryMonth: [],\n    diaryData: {},\n    isLoaded: false,\n  }),\n  computed: {\n    ...mapState(['isLogin', 'access_token']),\n  },\n  methods: {\n    ...mapActions(['logout']),\n    initTimeline: function(){\n      this.diaryMonth = [];\n      this.diaryData = {};\n      this.isLoaded = false;\n      if(!this.isLogin){\n        this.$alert(\"로그인이 필요한 페이지입니다.\",\"\",\"warning\");\n        this.$router.push('/');\n      } else {\n        const config = {\n          headers: {\n            Authorization: `Bearer ${this.access_token}`,\n          },\n        };\n        this.axios\n          .get(`${this.$store.state.BACKEND_URL}/api/diary/list`, config)\n          .then((res) => {\n            let monthyear = [];\n            let sorted_data = res.data.sort((a,b) => {\n              a = new Date(a.write_date);\n              b = new Date(b.write_date);\n              return a < b ? 1 : -1;\n            })\n            for(let i = 0; i < sorted_data.length; i++){\n              let tmp = sorted_data[i]['write_date'].split('-');\n              tmp = tmp[0] + \", \" + tmp[1] + \"월\";\n              if (tmp in this.diaryData){\n                this.diaryData[tmp].push(sorted_data[i]);\n              } else {\n                this.diaryData[tmp] = [sorted_data[i]];\n                tmp = \"#\"+tmp;\n                monthyear.push(tmp);\n              }\n            }\n            this.diaryMonth = monthyear;\n            this.isLoaded = true;\n          })\n          .catch(() => {\n            this.logout();\n            this.$alert(\"세션이 만료되었습니다. 다시 로그인 해주세요.\",\"\",\"error\");\n          });\n      }\n    }\n  },\n  created() {\n    this.initTimeline();\n  },\n}\n</script>\n\n<style>\n</style>"]}]}