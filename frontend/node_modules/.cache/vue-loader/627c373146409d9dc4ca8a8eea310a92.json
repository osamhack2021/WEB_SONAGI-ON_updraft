{"remainingRequest":"/workspaces/WEB_SONAGI-ON_updraft/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/workspaces/WEB_SONAGI-ON_updraft/frontend/src/components/RetireCalculator.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"/workspaces/WEB_SONAGI-ON_updraft/frontend/src/components/RetireCalculator.vue","mtime":1634449137141},{"path":"/workspaces/WEB_SONAGI-ON_updraft/frontend/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/workspaces/WEB_SONAGI-ON_updraft/frontend/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/workspaces/WEB_SONAGI-ON_updraft/frontend/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/workspaces/WEB_SONAGI-ON_updraft/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/workspaces/WEB_SONAGI-ON_updraft/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCiN0aXRsZSB7CiAgICBmb250LXNpemU6IDAuNzVyZW07Cn0KdGFibGUgdGggKyB0aCB7IGJvcmRlci1sZWZ0OjFweCBzb2xpZCAjZGRkZGRkOyB9CnRhYmxlIHRkICsgdGQgeyBib3JkZXItbGVmdDoxcHggc29saWQgI2RkZGRkZDsgfQo="},{"version":3,"sources":["RetireCalculator.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8IA;AACA;AACA;AACA;AACA","file":"RetireCalculator.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <v-card class=\"elevation-0\">\n  <v-toolbar class=\"elevation-2\">\n  <template>\n    <v-toolbar-title v-if=\"!isLogin\">D-??</v-toolbar-title>\n    <v-toolbar-title v-else>D-{{Math.floor(remainDays)}}</v-toolbar-title>\n  </template>\n  <v-spacer></v-spacer>\n  <v-toolbar-title>전역일 계산기</v-toolbar-title>\n  <v-spacer></v-spacer>\n  <template>\n    <v-toolbar-title v-if=\"!isLogin\" id=\"title\">\n      입대일: 0000-00-00<br/>전역일: 0000-00-00\n    </v-toolbar-title>\n    <v-toolbar-title v-else id=\"title\">\n      입대일: {{user.days[0]}}<br/>전역일: {{user.days[4]}}\n    </v-toolbar-title>\n  </template>\n  </v-toolbar>\n    \n  <v-divider></v-divider>\n    <v-container fluid class=\"pt-5\">\n        <div>\n            <v-row>\n                <v-col lg=\"3\" md=\"3\" sm=\"6\" xs=\"12\" class=\"pb-2\">\n                    <v-skeleton-loader\n                      v-if=\"!isLogin\"\n                      type=\"image\"\n                    > </v-skeleton-loader>\n                    <v-card v-else>\n                        <v-row class=\"no-gutters\">\n                            <div class=\"col-auto\">\n                                <div class=\"cyan fill-height\">&nbsp;</div>\n                            </div>\n                            <div class=\"col pa-3 py-4 cyan--text\">\n                                <h5 class=\"text-truncate text-uppercase\">현재 복무일</h5>\n                                <h1><animated-number\n                                    :value=\"currentDays\"\n                                    :formatValue=\"formatToDpDay\"\n                                    :duration=\"300\"\n                                    :round=\"1\"\n                                /></h1>\n                                <b>{{discharge_P}}%</b>\n                                <v-progress-linear \n                                :rotate=\"-90\"\n                                :size=\"100\" \n                                :width=\"7\" \n                                :value=\"discharge_P\" \n                                color=\"cyan\">\n                                </v-progress-linear>\n                            </div>\n                        </v-row>\n                    </v-card>\n                </v-col>\n                <v-spacer></v-spacer>\n                <v-col lg=\"3\" md=\"3\" sm=\"6\" xs=\"12\" class=\"pb-2\">\n                    <v-skeleton-loader\n                      v-if=\"!isLogin\"\n                      type=\"image\"\n                    > </v-skeleton-loader>\n                    <v-card v-else>\n                        <v-row class=\"no-gutters\">\n                            <div class=\"col-auto\">\n                                <div class=\"primary fill-height\">&nbsp;</div>\n                            </div>\n                            <div class=\"col pa-3 py-4 primary--text\">\n                                <h5 class=\"text-truncate text-uppercase\">남은 복무일</h5>\n                                <h1><animated-number\n                                    :value=\"remainDays\"\n                                    :formatValue=\"formatToDmDay\"\n                                    :duration=\"300\"\n                                    :round=\"1\"\n                                /></h1>\n                                <b>{{remain_P}}%</b>\n                                <v-progress-linear \n                                :rotate=\"-90\"\n                                :size=\"100\" \n                                :width=\"7\" \n                                :value=\"remain_P\" \n                                color=\"primary\">\n                                </v-progress-linear>\n                            </div>\n                        </v-row>\n                    </v-card>\n                </v-col>\n                <v-spacer></v-spacer>\n                <v-col lg=\"3\" md=\"3\" sm=\"6\" xs=\"12\" class=\"pb-2\">\n                    <v-skeleton-loader\n                      v-if=\"!isLogin\"\n                      type=\"image\"\n                    > </v-skeleton-loader>\n                    <v-card v-else>\n                        <v-row class=\"no-gutters\">\n                            <div class=\"col-auto\">\n                                <div class=\"success fill-height\">&nbsp;</div>\n                            </div>\n                            <div class=\"col pa-3 py-4 success--text\">\n                                <h5 class=\"text-truncate text-uppercase\">{{user.classes[rankIdx+1]}} 진급</h5>\n                                <h1><animated-number\n                                    :value=\"promotion\"\n                                    :formatValue=\"formatToDmDay\"\n                                    :duration=\"300\"\n                                    :round=\"1\"\n                                /></h1>\n                                <b>{{promotion_P}}%</b>\n                                <v-progress-linear :rotate=\"-90\" :size=\"100\" :width=\"7\" :value=\"promotion_P\" color=\"success\"></v-progress-linear>\n                            </div>\n                        </v-row>\n                    </v-card>\n                </v-col>\n                <v-spacer></v-spacer>\n                <v-col v-show=\"(!nmHouse)\" lg=\"3\" md=\"3\" sm=\"6\" xs=\"12\" class=\"pb-2\">\n                    <v-skeleton-loader\n                      v-if=\"!isLogin\"\n                      type=\"image\"\n                    > </v-skeleton-loader>\n                    <v-card v-else>\n                        <v-row class=\"no-gutters\">\n                            <div class=\"col-auto\">\n                                <div class=\"error fill-height\">&nbsp;</div>\n                            </div>\n                            <div class=\"col pa-3 py-4 error--text\">\n                                <h5 class=\"text-truncate text-uppercase\" >{{user.classes[nmRankIdx]}} {{nmStepIdx}}호봉 진급</h5>\n                                <h1><animated-number\n                                    :value=\"step\"\n                                    :formatValue=\"formatToDmDay\"\n                                    :duration=\"300\"\n                                    :round=\"1\"\n                                /></h1>\n                                <b>{{step_P}}%</b>\n                                <v-progress-linear :rotate=\"-90\" :size=\"100\" :width=\"7\" :value=\"step_P\" color=\"error\"></v-progress-linear>\n                            </div>\n                        </v-row>\n                    </v-card>\n                </v-col>\n            </v-row>\n        </div>\n    </v-container>\n    </v-card>\n</template>\n\n<style>\n    #title {\n        font-size: 0.75rem;\n    }\n    table th + th { border-left:1px solid #dddddd; }\n    table td + td { border-left:1px solid #dddddd; }\n</style>\n<script>\n  export default {\n    name: 'RetireCalculator',\n\n    data: () => ({\n    }),\n  }\n</script>\n\n<script>\nimport { mapState } from 'vuex';\nimport AnimatedNumber from \"animated-number-vue\";\n\nexport default {\n  components: {\n    AnimatedNumber\n  },\n  data() {\n    return {\n      user : {},\n      tmp : [],\n      discharge_P : 0, //전역일 퍼센트\n      remain_P : 0, // 남은 복무일 퍼센트\n      promotion_P : 0, // 다음 계급 진급일 퍼센트\n      step_P : 0,     // 다음 호봉 진급일 퍼센트\n      currentDays : 0, // 현재 복무일\n      remainDays : 0,  // 남은 복무일\n      promotion : 0,   // 다음 계급 진급일\n      step : 0,       // 다음 호봉 진급일\n      serviceDays : 0, // 전체 복무일\n      rankIdx : 0,      // 사용자의 현재 계급idx\n      nmRankIdx :0,      //사용자의 현재 계급idx\n      stepIdx : 0,      // 사용자의 현재 호봉\n      nmStepIdx : 0,     // 사용자음 다음 호봉\n      nmHouse : false,   // 다음 달에 전역일 경우\n    };\n  },\n  computed: {\n    ...mapState(['isLogin', 'userdata']),\n  },\n  methods: {\n    updateduserdata(userdata){\n      if(this.isLogin){\n        this.user = {\n            days : [userdata.enlisted_date,userdata.promotion1_date,userdata.promotion2_date,userdata.promotion3_date,userdata.delisted_date],       \n            classes : [\"이등병\",\"일병\",\"상병\",\"병장\",\"민간인\"],\n            type: userdata.type,\n        };\n      } else {\n        this.user = {\n          days : ['2021-09-01', '2021-10-02', '2021-10-10', '2021-10-11', '2021-11-22'],       \n          classes : [\"이등병\",\"일병\",\"상병\",\"병장\",\"민간인\"],\n          type: \"soldier\",\n        }\n      }\n    },\n    dateDiff(a,b){\n      return (a.getTime()-b.getTime())/(1000*3600*24);\n    },\n    formatToDmDay(value) {\n      return `D-${value}`;\n    },\n    formatToDpDay(value) {\n      return `D+${value}`;\n    },\n    updateRcData(){\n      var ui = this.user;\n      var tmp = []; //진급일 배열을 임시로 저장할 배열\n      var idx = 0;  // 사용자의 현재 계급의 인덱스\n      var today = new Date(); \n      ui.days.forEach((item)=> {         //tmp를 date객체를 가진 배열로 만들어 준다.\n          var list = item.split(\"-\");\n          tmp.push(new Date(list[0],list[1]-1,list[2]));\n      });\n      var all = Math.floor(this.dateDiff(tmp[4],tmp[0]));//총 복무일\n      this.serviceDays = all;       \n      var cur = Math.floor(this.dateDiff(today,tmp[0]))+1; //현재 복무일\n      this.currentDays = cur;\n      this.discharge_P = Math.round((this.dateDiff(today,tmp[0]) / all *100)*1000000)/1000000; //전역일 퍼센트\n      this.remain_P = Math.round((100-this.discharge_P)*1000000)/1000000.0;\n      /*----------------------------------------------------------------------------------------*/\n      this.remainDays = (all - cur + 1);                     //남은 복무일\n      for(var i=0;i<4;i++){ //현재 계급 구하기\n          if(tmp[i].getTime()<=today.getTime() && tmp[i+1].getTime()>today.getTime()){\n          idx = i;\n          break;\n          }\n      }\n      this.rankIdx = idx;\n      var prom = this.dateDiff(tmp[idx+1],today)+1; //다음 계급 진급일\n      this.promotion = prom;\n      var prodiff = this.dateDiff(tmp[idx+1],tmp[idx]) // 현재 계급 진급일과 다음 계급 진급일 일수 차 구하기\n      this.promotion_P = Math.round(((prodiff-prom)/prodiff *100)*1000000)/1000000; // 다음계급 진급일 퍼센트\n          /*----------------------------------------------------------------------------------------*/\n      var curStep = today.getMonth() - tmp[idx].getMonth() +1;  // 현재 호봉 수\n      this.stepIdx = curStep;\n      if(today.getMonth()+1 == tmp[idx+1].getMonth()){ //다음달이 진급일이라 호봉 수가 1로 바뀔 때\n          if(idx == 3){\n          this.nmStepIdx = curStep+1;\n          this.nmRankIdx = this.rankIdx;\n          }else{\n          this.nmStepIdx = 1;\n          this.nmRankIdx = this.rankIdx +1;\n          }\n      } else {        \n          this.nmStepIdx = curStep+1;\n          this.nmRankIdx = this.rankIdx;\n      }\n      var tm = new Date(today.getFullYear(),today.getMonth(),1);    //현재 달의 첫날\n      var nm = new Date(today.getFullYear(),today.getMonth()+1,1);  //다음 달의 첫날\n      var diff = this.dateDiff(nm,tm)       //한달 크기 구하기\n      this.step =  this.dateDiff(nm,today)+1;            //다음 호봉 진급일\n      if((nm.getTime()-tmp[4].getTime()) > 0 ){                      //다음 달 첫날이 전역 이후 일 때\n          this.nmHouse= true;\n      }else {\n          this.nmHouse = false;\n      }\n      this.step_P = Math.round(((diff-this.step)/diff *100)*1000000)/1000000; // 다음 호봉 진급일 퍼센트\n    }\n  },\n\n  watch: {\n    userdata: function() {\n      this.updateduserdata(this.userdata);\n      this.updateRcData();\n    }\n  },\n  created() {\n    this.updateduserdata(this.userdata);\n    this.updateRcData();\n  }\n};\n</script>"]}]}