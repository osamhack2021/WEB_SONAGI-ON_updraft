{"remainingRequest":"/workspaces/WEB_SONAGI-ON_updraft/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/workspaces/WEB_SONAGI-ON_updraft/frontend/src/views/DiaryWrite.vue?vue&type=script&lang=js&","dependencies":[{"path":"/workspaces/WEB_SONAGI-ON_updraft/frontend/src/views/DiaryWrite.vue","mtime":1634455689532},{"path":"/workspaces/WEB_SONAGI-ON_updraft/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/workspaces/WEB_SONAGI-ON_updraft/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/workspaces/WEB_SONAGI-ON_updraft/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/workspaces/WEB_SONAGI-ON_updraft/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcFN0YXRlLCBtYXBBY3Rpb25zIH0gZnJvbSAndnVleCcKaW1wb3J0IEVtb3Rpb25zIGZyb20gJy4uL2NvbXBvbmVudHMvc2lkZV9tb2R1bGVzL0Vtb3Rpb25zJwoKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIEVtb3Rpb25zLAogIH0sCiAgZGF0YTogKCk9PiAoewogICAgYmNMaW5rOiBbCiAgICAgIHsKICAgICAgICB0ZXh0OiAn64yA7Iuc67O065OcJywKICAgICAgICBkaXNhYmxlZDogZmFsc2UsCiAgICAgICAgaHJlZjogJ0Rhc2hib2FyZCcsCiAgICAgIH0sCiAgICAgIHsKICAgICAgICB0ZXh0OiAn7J286riwJywKICAgICAgICBkaXNhYmxlZDogZmFsc2UsCiAgICAgICAgaHJlZjogJ2RpYXJ5JywKICAgICAgfSwKICAgICAgewogICAgICAgIHRleHQ6ICfsnbzquLAg7JOw6riwJywKICAgICAgICBkaXNhYmxlZDogZmFsc2UsCiAgICAgICAgaHJlZjogJ2RpYXJ5LXdyaXRlJywKICAgICAgfSwKICAgIF0sCiAgICBlbW90aW9uOiAiIiwKICAgIHRpdGxlOiAiIiwKICAgIHRpdGxlUnVsZXM6IFsKICAgICAgdiA9PiAhIXYgfHwgJ+ygnOuqqeydgCDtlYTsiJgg7ZWt66qp7J6F64uI64ukLicsCiAgICAgIHYgPT4gdi5sZW5ndGggPCAyNSB8fCAn7KCc66qp7J2AIDI17J6QIOydtO2VmOuhnCDsoIHslrTso7zshLjsmpQuJwogICAgXSwKICAgIGNvbnRlbnQ6ICIiLAogICAgY29udGVudFJ1bGVzOiBbCiAgICAgIHYgPT4gISF2IHx8ICfrgrTsmqnsnYAg7ZWE7IiYIO2VreuqqeyeheuLiOuLpC4nLAogICAgICB2ID0+IHYubGVuZ3RoIDwgMTUwMCB8fCAn64K07Jqp7J2AIDE1MDDsnpAg7J207ZWY66GcIOyggeyWtOyjvOyEuOyalC4nCiAgICBdLAogICAgYXBpVXJsOiAid3JpdGUiLAogICAgaXNMb2FkZWQ6IGZhbHNlLAogIH0pLAogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBTdGF0ZShbJ2lzTG9naW4nLCAnYWNjZXNzX3Rva2VuJ10pLAogIH0sCiAgbWV0aG9kczogewogICAgLi4ubWFwQWN0aW9ucyhbJ2xvZ291dCddKSwKICAgIHVwZGF0ZUVtb3Rpb246IGZ1bmN0aW9uKGVtb3Rpb24pewogICAgICB0aGlzLmVtb3Rpb24gPSBlbW90aW9uOwogICAgfSwKICAgIGRpYXJ5V3JpdGU6IGZ1bmN0aW9uKGRpYXJ5T2JqKSB7CiAgICAgIGlmKHRoaXMuZW1vdGlvbiA9PT0gIiIpewogICAgICAgIHRoaXMuJGFsZXJ0KCLsmKTripjsnZgg6rCQ7KCV7J2EIOyEoO2Dne2VtCDso7zshLjsmpQuIiwiIiwiaW5mbyIpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBjb25zdCBpc192YWxpZCA9IHRoaXMuJHJlZnMuZGlhcnlmb3JtLnZhbGlkYXRlKCk7CiAgICAgIGlmKGlzX3ZhbGlkKXsKICAgICAgICBjb25zdCBjb25maWcgPSB7CiAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLmFjY2Vzc190b2tlbn1gLAogICAgICAgICAgfSwKICAgICAgICB9OwogICAgICAgIHRoaXMuYXhpb3MKICAgICAgICAgIC5wb3N0KGAke3RoaXMuJHN0b3JlLnN0YXRlLkJBQ0tFTkRfVVJMfS9hcGkvZGlhcnkvJHt0aGlzLmFwaVVybH1gLCBkaWFyeU9iaiwgY29uZmlnKQogICAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgICBpZih0aGlzLmFwaVVybCA9PT0gIndyaXRlIil7CiAgICAgICAgICAgICAgdGhpcy4kYWxlcnQoYOydvOq4sCDsnpHshLHsl5Ag7ISx6rO17ZaI7Iq164uI64ukLmAsIiIsInN1Y2Nlc3MiKTsKICAgICAgICAgICAgICB0aGlzLiRyZWZzLmRpYXJ5Zm9ybS5yZXNldCgpOwogICAgICAgICAgICB9IGVsc2UgaWYodGhpcy5hcGlVcmwgPT09ICJyZXdyaXRlIil7CiAgICAgICAgICAgICAgdGhpcy4kYWxlcnQoYOydvOq4sCDsiJjsoJXsl5Ag7ISx6rO17ZaI7Iq164uI64ukLmAsIiIsInN1Y2Nlc3MiKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSkKICAgICAgICAgIC5jYXRjaCgoKSA9PiB7CiAgICAgICAgICAgIHRoaXMubG9nb3V0KCk7CiAgICAgICAgICAgIHRoaXMuJGFsZXJ0KCLshLjshZjsnbQg66eM66OM65CY7JeI7Iq164uI64ukLiDri6Tsi5wg66Gc6re47J24IO2VtOyjvOyEuOyalC4iLCIiLCJlcnJvciIpOwogICAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9LAogIGNyZWF0ZWQoKXsKICAgIGlmKCF0aGlzLmlzTG9naW4pewogICAgICB0aGlzLiRhbGVydCgi66Gc6re47J247J20IO2VhOyalO2VnCDtjpjsnbTsp4DsnoXri4jri6QuIiwiIiwid2FybmluZyIpOwogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnLycpOwogICAgfQogICAgaWYodGhpcy4kcm91dGUucXVlcnkuaWQgIT09IHVuZGVmaW5lZCl7CiAgICAgIHRoaXMuYXBpVXJsID0gInJld3JpdGUiOwogICAgICBjb25zdCBjb25maWcgPSB7CiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuYWNjZXNzX3Rva2VufWAsCiAgICAgICAgfSwKICAgICAgfTsKICAgICAgdGhpcy5heGlvcwogICAgICAgIC5wb3N0KGAke3RoaXMuJHN0b3JlLnN0YXRlLkJBQ0tFTkRfVVJMfS9hcGkvZGlhcnkvZ2V0YCwgeyJpZCI6dGhpcy4kcm91dGUucXVlcnkuaWR9LCBjb25maWcpCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgdGhpcy50aXRsZSA9IHJlcy5kYXRhLnRpdGxlOwogICAgICAgICAgdGhpcy5jb250ZW50ID0gcmVzLmRhdGEuY29udGVudDsKICAgICAgICAgIHRoaXMuZW1vdGlvbiA9IHJlcy5kYXRhLmVtb3Rpb247CiAgICAgICAgICB0aGlzLmlzTG9hZGVkID0gdHJ1ZTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgIGlmKGVycm9yLnJlc3BvbnNlLmRhdGEuZGV0YWlsID09PSAi7ZW064u57ZWY64qUIOydvOq4sOqwgCDsobTsnqztlZjsp4Ag7JWK7Iq164uI64ukLiIpewogICAgICAgICAgICB0aGlzLiRhbGVydCgi7ZW064u57ZWY64qUIOydvOq4sOqwgCDsobTsnqztlZjsp4Ag7JWK7Iq164uI64ukLiIsIiIsImVycm9yIik7CiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5nbygtMSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLiRhbGVydCgiW0RXMDAxXSDsmIjsg4HsuZgg66q77ZWcIOyXkOufrOqwgCDrsJzsg53tlojsirXri4jri6QuIOqzoOqwneyEvO2EsOuhnCDrrLjsnZgg67CU656N64uI64ukLiIsIiIsImVycm9yIik7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICB0aGlzLmlzTG9hZGVkID0gdHJ1ZTsKICAgIH0KICB9Cn0K"},{"version":3,"sources":["DiaryWrite.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6CA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"DiaryWrite.vue","sourceRoot":"src/views","sourcesContent":["<template lang=\"\">\n    <div class=\"pb-8\">\n    <v-card class=\"group pa-2\">\n      <v-icon small style=\"margin-left:5px\">home</v-icon>\n      <v-breadcrumbs :items=\"bcLink\"></v-breadcrumbs>\n    </v-card>\n    <v-layout align-center column fill-height class=\"py-8 px-4\">\n      <v-card class=\"py-8 px-4 ma-4\" style=\"max-width: 900px; Mmiwidth: 900px; height: 700px\">\n        <v-card-title class=\"justify-center\">\n          오늘 나의 감정\n        </v-card-title>\n        <v-layout justify-center>\n          <Emotions\n            v-if=\"isLoaded\"\n            :propEmotion=\"emotion\"\n            @emotion-extract=\"updateEmotion\"\n          > </Emotions>\n        </v-layout>\n        <v-form ref=\"diaryform\" lazy-validation>\n          <v-text-field\n            v-model=\"title\"\n            label=\"제목\"\n            :rules=\"titleRules\"\n            clearable\n          ></v-text-field>\n          <v-textarea\n          counter\n          v-model=\"content\"\n          label=\"내용\"\n          :rules=\"contentRules\"\n          rows=\"15\"\n          row-height=\"30\"\n          ></v-textarea>\n        </v-form>\n      </v-card>\n      <v-layout justify-center>\n          <v-btn @click=\"diaryWrite({'id':$route.query.id, title, content, emotion})\">\n            작성하기\n          </v-btn>\n      </v-layout>\n    </v-layout>\n    </div>\n</template>\n\n<script>\nimport { mapState, mapActions } from 'vuex'\nimport Emotions from '../components/side_modules/Emotions'\n\nexport default {\n  components: {\n    Emotions,\n  },\n  data: ()=> ({\n    bcLink: [\n      {\n        text: '대시보드',\n        disabled: false,\n        href: 'Dashboard',\n      },\n      {\n        text: '일기',\n        disabled: false,\n        href: 'diary',\n      },\n      {\n        text: '일기 쓰기',\n        disabled: false,\n        href: 'diary-write',\n      },\n    ],\n    emotion: \"\",\n    title: \"\",\n    titleRules: [\n      v => !!v || '제목은 필수 항목입니다.',\n      v => v.length < 25 || '제목은 25자 이하로 적어주세요.'\n    ],\n    content: \"\",\n    contentRules: [\n      v => !!v || '내용은 필수 항목입니다.',\n      v => v.length < 1500 || '내용은 1500자 이하로 적어주세요.'\n    ],\n    apiUrl: \"write\",\n    isLoaded: false,\n  }),\n  computed: {\n    ...mapState(['isLogin', 'access_token']),\n  },\n  methods: {\n    ...mapActions(['logout']),\n    updateEmotion: function(emotion){\n      this.emotion = emotion;\n    },\n    diaryWrite: function(diaryObj) {\n      if(this.emotion === \"\"){\n        this.$alert(\"오늘의 감정을 선택해 주세요.\",\"\",\"info\");\n        return;\n      }\n      const is_valid = this.$refs.diaryform.validate();\n      if(is_valid){\n        const config = {\n          headers: {\n            Authorization: `Bearer ${this.access_token}`,\n          },\n        };\n        this.axios\n          .post(`${this.$store.state.BACKEND_URL}/api/diary/${this.apiUrl}`, diaryObj, config)\n          .then(() => {\n            if(this.apiUrl === \"write\"){\n              this.$alert(`일기 작성에 성공했습니다.`,\"\",\"success\");\n              this.$refs.diaryform.reset();\n            } else if(this.apiUrl === \"rewrite\"){\n              this.$alert(`일기 수정에 성공했습니다.`,\"\",\"success\");\n            }\n          })\n          .catch(() => {\n            this.logout();\n            this.$alert(\"세션이 만료되었습니다. 다시 로그인 해주세요.\",\"\",\"error\");\n          });\n      }\n    }\n  },\n  created(){\n    if(!this.isLogin){\n      this.$alert(\"로그인이 필요한 페이지입니다.\",\"\",\"warning\");\n      this.$router.push('/');\n    }\n    if(this.$route.query.id !== undefined){\n      this.apiUrl = \"rewrite\";\n      const config = {\n        headers: {\n          Authorization: `Bearer ${this.access_token}`,\n        },\n      };\n      this.axios\n        .post(`${this.$store.state.BACKEND_URL}/api/diary/get`, {\"id\":this.$route.query.id}, config)\n        .then((res) => {\n          this.title = res.data.title;\n          this.content = res.data.content;\n          this.emotion = res.data.emotion;\n          this.isLoaded = true;\n        })\n        .catch((error) => {\n          if(error.response.data.detail === \"해당하는 일기가 존재하지 않습니다.\"){\n            this.$alert(\"해당하는 일기가 존재하지 않습니다.\",\"\",\"error\");\n            this.$router.go(-1);\n          } else {\n            this.$alert(\"[DW001] 예상치 못한 에러가 발생했습니다. 고객센터로 문의 바랍니다.\",\"\",\"error\");\n          }\n        });\n    } else {\n      this.isLoaded = true;\n    }\n  }\n}\n</script>\n<style lang=\"\">\n    \n</style>"]}]}