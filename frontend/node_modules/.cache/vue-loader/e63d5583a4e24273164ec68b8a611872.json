{"remainingRequest":"/workspaces/WEB_SONAGI-ON_updraft/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/workspaces/WEB_SONAGI-ON_updraft/frontend/src/components/Profile.vue?vue&type=script&lang=js&","dependencies":[{"path":"/workspaces/WEB_SONAGI-ON_updraft/frontend/src/components/Profile.vue","mtime":1634648827351},{"path":"/workspaces/WEB_SONAGI-ON_updraft/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1634648816471},{"path":"/workspaces/WEB_SONAGI-ON_updraft/frontend/node_modules/babel-loader/lib/index.js","mtime":1634648816471},{"path":"/workspaces/WEB_SONAGI-ON_updraft/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1634648816471},{"path":"/workspaces/WEB_SONAGI-ON_updraft/frontend/node_modules/vue-loader/lib/index.js","mtime":1634648814815}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcFN0YXRlLCBtYXBBY3Rpb25zIH0gZnJvbSAndnVleCc7CmltcG9ydCBMb2dpbkRpYWxvZyBmcm9tICcuL3NpZGVfbW9kdWxlcy9Mb2dpbkRpYWxvZy52dWUnCmltcG9ydCBSZWdpc3RlciBmcm9tICcuL3NpZGVfbW9kdWxlcy9SZWdpc3Rlci52dWUnCmltcG9ydCBVc2VyU2V0dGluZyBmcm9tICcuL3NpZGVfbW9kdWxlcy9Vc2VyU2V0dGluZy52dWUnCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ1Byb2ZpbGUnLAogIGNvbXBvbmVudHM6IHsgCiAgICBMb2dpbkRpYWxvZywKICAgIFJlZ2lzdGVyLAogICAgVXNlclNldHRpbmcsCiAgfSwKICBkYXRhOiAoKSA9PiAoewogICAgdXNlcjogeyJuaWNrbmFtZSI6IuustOuqhSIsICJyYW5rIjoi6rKM7Iqk7Yq4IiwgInByb2ZpbGUiOm51bGx9LAogIH0pLAogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBTdGF0ZShbJ2lzTG9naW4nLCAndXNlcmRhdGEnXSksCiAgfSwKICBtZXRob2RzOiB7CiAgICAuLi5tYXBBY3Rpb25zKFsnbG9nb3V0J10pLAogICAgaW5pdFByb2ZpbGU6IGZ1bmN0aW9uKCkgewogICAgICBpZih0aGlzLmlzTG9naW4pewogICAgICAgIHRoaXMudXNlci5uaWNrbmFtZSA9IHRoaXMudXNlcmRhdGEubmlja25hbWU7CiAgICAgICAgdGhpcy51c2VyLnByb2ZpbGUgPSB0aGlzLnVzZXJkYXRhLnByb2ZpbGU7CiAgICAgICAgbGV0IHByb21vdGlvbl9kYXRlcyA9IFtuZXcgRGF0ZSh0aGlzLnVzZXJkYXRhLnByb21vdGlvbjFfZGF0ZSksIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBEYXRlKHRoaXMudXNlcmRhdGEucHJvbW90aW9uMl9kYXRlKSwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IERhdGUodGhpcy51c2VyZGF0YS5wcm9tb3Rpb24zX2RhdGUpXTsKICAgICAgICBsZXQgdG9kYXkgPSBuZXcgRGF0ZSgpOwogICAgICAgIC8vIHRvZG8gOiDrtoDsgqzqtIAsIOyepeq1kOyXkCDrjIDtlbTshJzrj4Qg64KY7YOA64K8IOyImCDsnojrj4TroZ0KICAgICAgICBpZih0aGlzLnVzZXJkYXRhLnR5cGUgPT09ICJzb2xkaWVyIil7CiAgICAgICAgICBsZXQgcmFua3MgPSBbIuydtOuzkSIsICLsnbzrs5EiLCAi7IOB67ORIiwgIuuzkeyepSJdOwogICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHByb21vdGlvbl9kYXRlcy5sZW5ndGg7IGkrKyl7CiAgICAgICAgICAgIGlmKHRvZGF5IDwgcHJvbW90aW9uX2RhdGVzW2ldKXsKICAgICAgICAgICAgICB0aGlzLnVzZXIucmFuayA9IHJhbmtzW2ldCiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy51c2VyID0geyJuaWNrbmFtZSI6IuustOuqhSIsICJyYW5rIjoi6rKM7Iqk7Yq4IiwgInByb2ZpbGUiOm51bGx9OwogICAgICB9CiAgICB9LAogIH0sCiAgd2F0Y2g6IHsKICAgIHVzZXJkYXRhOiBmdW5jdGlvbigpIHsKICAgICAgdGhpcy5pbml0UHJvZmlsZSgpOwogICAgfSwKICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmluaXRQcm9maWxlKCk7CiAgfSwKfQo="},{"version":3,"sources":["Profile.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0DA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Profile.vue","sourceRoot":"src/components","sourcesContent":["<template>\n   <v-card height=\"350px\" class=\"d-flex align-center justify-center\">\n      <v-list>\n        <v-list-item>\n          <template v-if=\"!isLogin || user.profile === null\">\n                <v-icon size=150>mdi-account-circle</v-icon>\n          </template>\n          <template v-else>\n            <v-avatar size=\"150\">\n              <!-- todo: v-badge로 계급 사진 넣기 -->\n              <img\n                :src=\"$store.state.BACKEND_URL+'/'+user.profile\"\n                alt=\"에러\"\n              >\n            </v-avatar>\n          </template>\n        </v-list-item>\n         <v-list-item>\n            <v-list-item-content>\n               <v-list-item-title class=\"text-h5 d-flex align-center justify-center\">{{user.nickname}}</v-list-item-title>\n               <v-list-item-subtitle class=\"d-flex align-center justify-center\">{{user.rank}}</v-list-item-subtitle>\n            </v-list-item-content>\n         </v-list-item>\n         <v-list-item class=\"justify-center\">\n            <template v-if=\"!isLogin\">\n                <v-row>\n                  <v-col>\n                    <LoginDialog />\n                  </v-col>\n                  <v-col>\n                    <Register />\n                  </v-col>\n                </v-row>\n            </template>\n            <template v-else>\n              <v-row>\n                  <v-col>\n                    <UserSetting />\n                  </v-col>\n                  <v-col>\n                    <v-row justify=\"center\">\n                      <v-btn\n                          color=\"grey darken-2 white--text\"\n                          dark\n                          @click=\"logout()\"\n                      > \n                          로그아웃\n                      </v-btn>\n                    </v-row>\n                  </v-col>\n               </v-row>\n            </template>\n         </v-list-item>\n      </v-list>\n   </v-card>\n</template>\n\n<script>\nimport { mapState, mapActions } from 'vuex';\nimport LoginDialog from './side_modules/LoginDialog.vue'\nimport Register from './side_modules/Register.vue'\nimport UserSetting from './side_modules/UserSetting.vue'\n\nexport default {\n  name: 'Profile',\n  components: { \n    LoginDialog,\n    Register,\n    UserSetting,\n  },\n  data: () => ({\n    user: {\"nickname\":\"무명\", \"rank\":\"게스트\", \"profile\":null},\n  }),\n  computed: {\n    ...mapState(['isLogin', 'userdata']),\n  },\n  methods: {\n    ...mapActions(['logout']),\n    initProfile: function() {\n      if(this.isLogin){\n        this.user.nickname = this.userdata.nickname;\n        this.user.profile = this.userdata.profile;\n        let promotion_dates = [new Date(this.userdata.promotion1_date), \n                                new Date(this.userdata.promotion2_date), \n                                new Date(this.userdata.promotion3_date)];\n        let today = new Date();\n        // todo : 부사관, 장교에 대해서도 나타낼 수 있도록\n        if(this.userdata.type === \"soldier\"){\n          let ranks = [\"이병\", \"일병\", \"상병\", \"병장\"];\n          for(let i = 0; i < promotion_dates.length; i++){\n            if(today < promotion_dates[i]){\n              this.user.rank = ranks[i]\n              break;\n            }\n          }\n        }\n      } else {\n        this.user = {\"nickname\":\"무명\", \"rank\":\"게스트\", \"profile\":null};\n      }\n    },\n  },\n  watch: {\n    userdata: function() {\n      this.initProfile();\n    },\n  },\n  created() {\n    this.initProfile();\n  },\n}\n</script>"]}]}