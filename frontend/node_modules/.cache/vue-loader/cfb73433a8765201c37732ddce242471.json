{"remainingRequest":"/workspaces/WEB_SONAGI-ON_updraft/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/workspaces/WEB_SONAGI-ON_updraft/frontend/src/components/side_modules/UserSetting.vue?vue&type=script&lang=js&","dependencies":[{"path":"/workspaces/WEB_SONAGI-ON_updraft/frontend/src/components/side_modules/UserSetting.vue","mtime":1634648827351},{"path":"/workspaces/WEB_SONAGI-ON_updraft/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1634648816471},{"path":"/workspaces/WEB_SONAGI-ON_updraft/frontend/node_modules/babel-loader/lib/index.js","mtime":1634648816471},{"path":"/workspaces/WEB_SONAGI-ON_updraft/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1634648816471},{"path":"/workspaces/WEB_SONAGI-ON_updraft/frontend/node_modules/vue-loader/lib/index.js","mtime":1634648814815}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcFN0YXRlLCBtYXBBY3Rpb25zIH0gZnJvbSAndnVleCc7CmltcG9ydCBVc2VyU2V0dGluZ0RhdGVQaWNrZXIgZnJvbSAnLi9Vc2VyU2V0dGluZ0RhdGVQaWNrZXIudnVlJwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdVc2VyU2V0dGluZycsCiAgY29tcG9uZW50czogewogICAgVXNlclNldHRpbmdEYXRlUGlja2VyLAogIH0sCiAgLy8g7JWE656Y7JmAIOqwmeydgCDtmJXsi53snLzroZwgZGF0YeulvCDsjajslbwg7JWI7JeQ7IScIHRoaXPrpbwg7JO4IOyImCDsnojri6QuCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGRpYWxvZzogZmFsc2UsCiAgICAgIGVtYWlsOiAiIiwKICAgICAgcGFzc3dvcmQ6ICIiLAogICAgICBwYXNzd29yZDI6ICIiLAogICAgICBwYXNzd29yZFJ1bGVzMjogWwogICAgICAgIHYgPT4gdiA9PT0gdGhpcy5wYXNzd29yZCB8fCAn7Yyo7Iqk7JuM65Oc6rCAIOydvOy5mO2VmOyngCDslYrsirXri4jri6QuJywKICAgICAgXSwKICAgICAgbmlja25hbWU6ICIiLAogICAgICBuaWNrbmFtZVJ1bGVzOiBbCiAgICAgICAgdiA9PiB2Lmxlbmd0aCA+IDEgfHwgJ+uLieuEpOyehOydgCAy7J6QIOydtOyDgeydtOyWtOyVvCDtlanri4jri6QuJywKICAgICAgICB2ID0+IHYubGVuZ3RoIDwgMTYgfHwgJ+uLieuEpOyehOydgCAxNeyekCDsnbTtlZjsl6zslbwg7ZWp64uI64ukLicsCiAgICAgIF0sCiAgICAgIHByb2ZpbGU6IG51bGwsCiAgICAgIHByb2ZpbGVSdWxlczogWwogICAgICAgIHYgPT4gISF2IHx8IHYuc2l6ZSA8IDIwMDAwMDAgfHwgJ+2UhOuhnO2VhCDsnbTrr7jsp4Ag7YGs6riw64qUIDJNQuulvCDrhJjsnYQg7IiYIOyXhuyKteuLiOuLpC4nLAogICAgICBdLAogICAgICBtYWpvcjogeyBzdGF0ZTogJycsIGFiYnI6ICcnIH0sCiAgICAgIG1ham9yX2l0ZW1zOiBbCiAgICAgICAgeyBzdGF0ZTogJ+ycoeq1sCcsIGFiYnI6ICdhcm15JyB9LAogICAgICAgIHsgc3RhdGU6ICftlbTqtbAnLCBhYmJyOiAnbmF2eScgfSwKICAgICAgICB7IHN0YXRlOiAn6rO16rWwJywgYWJicjogJ2FpcicgfSwKICAgICAgICB7IHN0YXRlOiAn7ZW067OR64yAJywgYWJicjogJ21hcmluZScgfSwKICAgICAgXSwKICAgICAgdHlwZTogeyBzdGF0ZTogJycsIGFiYnI6ICcnIH0sCiAgICAgIHR5cGVfaXRlbXM6IFsKICAgICAgICB7IHN0YXRlOiAn7Jqp7IKsJywgYWJicjogJ3NvbGRpZXInIH0sCiAgICAgICAgeyBzdGF0ZTogJ+u2gOyCrOq0gCcsIGFiYnI6ICduY28nIH0sCiAgICAgICAgeyBzdGF0ZTogJ+yepeq1kCcsIGFiYnI6ICdvZmZpY2VyJyB9LAogICAgICBdLAogICAgICBlbmxpc3RlZF9kYXRlOiAiMjAyMS0xMC0xNCIsCiAgICAgIGRlbGlzdGVkX2RhdGU6ICIyMDIxLTEwLTE4IiwKICAgICAgcHJvbW90aW9uMV9sYWJlbCA6ICLsnbzrs5Eg7KeE6riJ7J28IiwKICAgICAgcHJvbW90aW9uMV9kYXRlOiAiMjAyMS0xMC0xNSIsCiAgICAgIHByb21vdGlvbjJfbGFiZWwgOiAi7IOB67ORIOynhOq4ieydvCIsCiAgICAgIHByb21vdGlvbjJfZGF0ZTogIjIwMjEtMTAtMTYiLAogICAgICBwcm9tb3Rpb24zX2xhYmVsIDogIuuzkeyepSDsp4TquInsnbwiLAogICAgICBwcm9tb3Rpb24zX2RhdGU6ICIyMDIxLTEwLTE3IiwKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBTdGF0ZShbJ2lzTG9naW4nLCAnYWNjZXNzX3Rva2VuJywgJ3JlZnJlc2hfdG9rZW4nLCAndXNlcmRhdGEnXSksCiAgfSwKICBtZXRob2RzOiB7CiAgICAuLi5tYXBBY3Rpb25zKFsndXBkYXRlVXNlcmRhdGEnXSksCiAgICByZWZyZXNoSW5mbzogZnVuY3Rpb24oKXsKICAgICAgdGhpcy5lbWFpbCA9IHRoaXMudXNlcmRhdGEuZW1haWw7CiAgICAgIHRoaXMubmlja25hbWUgPSB0aGlzLnVzZXJkYXRhLm5pY2tuYW1lOwogICAgICB0aGlzLm1ham9yID0gdGhpcy5tYWpvcl9pdGVtcy5maWx0ZXIodiA9PiB2LmFiYnIgPT09IHRoaXMudXNlcmRhdGEubWFqb3IpWzBdOwogICAgICB0aGlzLnR5cGUgPSB0aGlzLnR5cGVfaXRlbXMuZmlsdGVyKHYgPT4gdi5hYmJyID09PSB0aGlzLnVzZXJkYXRhLnR5cGUpWzBdOwogICAgICB0aGlzLmVubGlzdGVkX2RhdGUgPSB0aGlzLnVzZXJkYXRhLmVubGlzdGVkX2RhdGU7CiAgICAgIHRoaXMuZGVsaXN0ZWRfZGF0ZSA9IHRoaXMudXNlcmRhdGEuZGVsaXN0ZWRfZGF0ZTsKICAgICAgdGhpcy5wcm9tb3Rpb24xX2RhdGUgPSB0aGlzLnVzZXJkYXRhLnByb21vdGlvbjFfZGF0ZSA7CiAgICAgIHRoaXMucHJvbW90aW9uMl9kYXRlID0gdGhpcy51c2VyZGF0YS5wcm9tb3Rpb24yX2RhdGU7CiAgICAgIHRoaXMucHJvbW90aW9uM19kYXRlID0gdGhpcy51c2VyZGF0YS5wcm9tb3Rpb24zX2RhdGUKICAgIH0sCiAgICB1cGRhdGVTZXR0aW5nOiBmdW5jdGlvbigpewogICAgICBjb25zdCBjb25maWcgPSB7CiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuYWNjZXNzX3Rva2VufWAsCiAgICAgICAgfSwKICAgICAgfTsKICAgICAgbGV0IGZvcm1kYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgIGZvcm1kYXRhLmFwcGVuZCgibmlja25hbWUiLCB0aGlzLm5pY2tuYW1lKTsKICAgICAgaWYgKHRoaXMucHJvZmlsZSAhPT0gbnVsbCl7CiAgICAgICAgZm9ybWRhdGEuYXBwZW5kKCJwcm9maWxlIiwgdGhpcy5wcm9maWxlKTsKICAgICAgfQogICAgICBmb3JtZGF0YS5hcHBlbmQoIm1ham9yIiwgdGhpcy5tYWpvci5hYmJyKTsKICAgICAgZm9ybWRhdGEuYXBwZW5kKCJ0eXBlIiwgdGhpcy50eXBlLmFiYnIpOwogICAgICBmb3JtZGF0YS5hcHBlbmQoImVubGlzdGVkX2RhdGUiLCB0aGlzLmVubGlzdGVkX2RhdGUpOwogICAgICBmb3JtZGF0YS5hcHBlbmQoImRlbGlzdGVkX2RhdGUiLCB0aGlzLmRlbGlzdGVkX2RhdGUpOwogICAgICBmb3JtZGF0YS5hcHBlbmQoInByb21vdGlvbjFfZGF0ZSIsIHRoaXMucHJvbW90aW9uMV9kYXRlKTsKICAgICAgZm9ybWRhdGEuYXBwZW5kKCJwcm9tb3Rpb24yX2RhdGUiLCB0aGlzLnByb21vdGlvbjJfZGF0ZSk7CiAgICAgIGZvcm1kYXRhLmFwcGVuZCgicHJvbW90aW9uM19kYXRlIiwgdGhpcy5wcm9tb3Rpb24zX2RhdGUpOwogICAgICB0aGlzLmF4aW9zLnBvc3QoYCR7dGhpcy4kc3RvcmUuc3RhdGUuQkFDS0VORF9VUkx9L2FwaS91c2Vyc2V0dGluZy9yZXZpc2VgLCBmb3JtZGF0YSwgY29uZmlnKQogICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgIHRoaXMudXBkYXRlVXNlcmRhdGEoKTsKICAgICAgICAgIHRoaXMuJGFsZXJ0KCLshLHqs7XsoIHsnLzroZwg67OA6rK965CY7JeI7Iq164uI64ukLiIsIiIsInN1Y2Nlc3MiKTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoKSA9PiB7CiAgICAgICAgICB0aGlzLnVwZGF0ZVVzZXJkYXRhKCk7CiAgICAgICAgfSkKICAgIH0sCiAgICB1cGRhdGVEYXRlOiBmdW5jdGlvbih7dHlwZSwgbmV3RGF0ZX0pewogICAgICB0aGlzW3R5cGVdID0gbmV3RGF0ZTsKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICBkaWFsb2c6IGZ1bmN0aW9uKHZhbCl7CiAgICAgIGlmICh2YWwpewogICAgICAgIHRoaXMucmVmcmVzaEluZm8oKTsKICAgICAgfQogICAgfSwKICB9Cn0K"},{"version":3,"sources":["UserSetting.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuJA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"UserSetting.vue","sourceRoot":"src/components/side_modules","sourcesContent":["<template>\n  <v-row justify=\"center\">\n    <v-dialog\n      v-model=\"dialog\"\n      max-width=\"600px\"\n    >\n      <template v-slot:activator=\"{ on, attrs }\">\n        <v-btn\n          color=\"grey darken-2 white--text\"\n          dark\n          v-bind=\"attrs\"\n          v-on=\"on\"\n        >\n          설정\n        </v-btn>\n      </template>\n      <v-card>\n        <v-card-title>\n          <span class=\"text-h5\">설정</span>\n        </v-card-title>\n        <v-card-text>\n          <v-container>\n            <v-form ref=\"usersettingform\" lazy-validation>\n            <v-row>\n              <v-col cols=\"12\">\n                <v-text-field\n                  name=\"email\"\n                  label=\"이메일\"\n                  v-model=\"email\"\n                  readonly\n                ></v-text-field>\n              </v-col>\n              <v-col cols=\"6\">\n                <v-text-field\n                  name=\"password\"\n                  label=\"패스워드\"\n                  v-model=\"password\"\n                  type=\"password\"\n                ></v-text-field>\n              </v-col>\n              <v-col cols=\"6\">\n                <v-text-field\n                  name=\"password2\"\n                  label=\"패스워드 확인\"\n                  v-model=\"password2\"\n                  type=\"password\"\n                  :rules=\"passwordRules2\"\n                ></v-text-field>\n              </v-col>\n              <v-col cols=\"6\">\n                <v-text-field\n                  name=\"nickname\"\n                  label=\"닉네임\"\n                  v-model=\"nickname\"\n                  :rules=\"nicknameRules\"\n                ></v-text-field>\n              </v-col>\n              <v-col cols=\"6\">\n                <v-file-input\n                  accept=\"image/png, image/jpeg, image/bmp\"\n                  placeholder=\"프로필 이미지를 선택해 주세요.\"\n                  prepend-icon=\"mdi-camera\"\n                  label=\"프로필\"\n                  v-model=\"profile\"\n                  :rules=\"profileRules\"\n                ></v-file-input>\n              </v-col>\n              <v-col cols=\"6\">\n                <v-select\n                  v-model=\"major\"\n                  :items=\"major_items\"\n                  item-text=\"state\"\n                  item-value=\"abbr\"\n                  hint=\"군 구분\"\n                  persistent-hint\n                  return-object\n                  single-line\n                ></v-select>\n              </v-col>\n              <v-col cols=\"6\">\n                <v-select\n                  v-model=\"type\"\n                  :items=\"type_items\"\n                  item-text=\"state\"\n                  item-value=\"abbr\"\n                  hint=\"복무 형태\"\n                  persistent-hint\n                  return-object\n                  single-line\n                ></v-select>\n              </v-col>\n              <v-col cols=\"6\">\n                <UserSettingDatePicker\n                  type='enlisted_date'\n                  label='입대일'\n                  v-bind:propDate=\"enlisted_date\" \n                  @date-extract=\"updateDate\"\n                ></UserSettingDatePicker>\n              </v-col>\n              <v-col cols=\"6\">\n                <UserSettingDatePicker\n                  type='delisted_date'\n                  label='전역일'\n                  v-bind:propDate=\"delisted_date\" \n                  @date-extract=\"updateDate\"\n                ></UserSettingDatePicker>\n              </v-col>\n              <v-col cols=\"4\">\n                <UserSettingDatePicker\n                  type='promotion1_date'\n                  v-bind:label='promotion1_label'\n                  v-bind:propDate=\"promotion1_date\" \n                  @date-extract=\"updateDate\"\n                ></UserSettingDatePicker>\n              </v-col>\n              <v-col cols=\"4\">\n                <UserSettingDatePicker\n                  type='promotion2_date'\n                  v-bind:label='promotion2_label'\n                  v-bind:propDate=\"promotion2_date\" \n                  @date-extract=\"updateDate\"\n                ></UserSettingDatePicker>\n              </v-col>\n              <v-col cols=\"4\">\n                <UserSettingDatePicker\n                  type='promotion3_date'\n                  v-bind:label='promotion3_label'\n                  v-bind:propDate=\"promotion3_date\" \n                  @date-extract=\"updateDate\"\n                ></UserSettingDatePicker>\n              </v-col>\n            </v-row>\n            </v-form>\n          </v-container>\n        </v-card-text>\n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-btn\n            color=\"blue darken-1\"\n            text\n            @click=\"updateSetting()\"\n          >\n            변경\n          </v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n  </v-row>\n</template>\n\n<script>\nimport { mapState, mapActions } from 'vuex';\nimport UserSettingDatePicker from './UserSettingDatePicker.vue'\n\nexport default {\n  name: 'UserSetting',\n  components: {\n    UserSettingDatePicker,\n  },\n  // 아래와 같은 형식으로 data를 써야 안에서 this를 쓸 수 있다.\n  data() {\n    return {\n      dialog: false,\n      email: \"\",\n      password: \"\",\n      password2: \"\",\n      passwordRules2: [\n        v => v === this.password || '패스워드가 일치하지 않습니다.',\n      ],\n      nickname: \"\",\n      nicknameRules: [\n        v => v.length > 1 || '닉네임은 2자 이상이어야 합니다.',\n        v => v.length < 16 || '닉네임은 15자 이하여야 합니다.',\n      ],\n      profile: null,\n      profileRules: [\n        v => !!v || v.size < 2000000 || '프로필 이미지 크기는 2MB를 넘을 수 없습니다.',\n      ],\n      major: { state: '', abbr: '' },\n      major_items: [\n        { state: '육군', abbr: 'army' },\n        { state: '해군', abbr: 'navy' },\n        { state: '공군', abbr: 'air' },\n        { state: '해병대', abbr: 'marine' },\n      ],\n      type: { state: '', abbr: '' },\n      type_items: [\n        { state: '용사', abbr: 'soldier' },\n        { state: '부사관', abbr: 'nco' },\n        { state: '장교', abbr: 'officer' },\n      ],\n      enlisted_date: \"2021-10-14\",\n      delisted_date: \"2021-10-18\",\n      promotion1_label : \"일병 진급일\",\n      promotion1_date: \"2021-10-15\",\n      promotion2_label : \"상병 진급일\",\n      promotion2_date: \"2021-10-16\",\n      promotion3_label : \"병장 진급일\",\n      promotion3_date: \"2021-10-17\",\n    }\n  },\n  computed: {\n    ...mapState(['isLogin', 'access_token', 'refresh_token', 'userdata']),\n  },\n  methods: {\n    ...mapActions(['updateUserdata']),\n    refreshInfo: function(){\n      this.email = this.userdata.email;\n      this.nickname = this.userdata.nickname;\n      this.major = this.major_items.filter(v => v.abbr === this.userdata.major)[0];\n      this.type = this.type_items.filter(v => v.abbr === this.userdata.type)[0];\n      this.enlisted_date = this.userdata.enlisted_date;\n      this.delisted_date = this.userdata.delisted_date;\n      this.promotion1_date = this.userdata.promotion1_date ;\n      this.promotion2_date = this.userdata.promotion2_date;\n      this.promotion3_date = this.userdata.promotion3_date\n    },\n    updateSetting: function(){\n      const config = {\n        headers: {\n          Authorization: `Bearer ${this.access_token}`,\n        },\n      };\n      let formdata = new FormData();\n      formdata.append(\"nickname\", this.nickname);\n      if (this.profile !== null){\n        formdata.append(\"profile\", this.profile);\n      }\n      formdata.append(\"major\", this.major.abbr);\n      formdata.append(\"type\", this.type.abbr);\n      formdata.append(\"enlisted_date\", this.enlisted_date);\n      formdata.append(\"delisted_date\", this.delisted_date);\n      formdata.append(\"promotion1_date\", this.promotion1_date);\n      formdata.append(\"promotion2_date\", this.promotion2_date);\n      formdata.append(\"promotion3_date\", this.promotion3_date);\n      this.axios.post(`${this.$store.state.BACKEND_URL}/api/usersetting/revise`, formdata, config)\n        .then(() => {\n          this.updateUserdata();\n          this.$alert(\"성공적으로 변경되었습니다.\",\"\",\"success\");\n        })\n        .catch(() => {\n          this.updateUserdata();\n        })\n    },\n    updateDate: function({type, newDate}){\n      this[type] = newDate;\n    }\n  },\n  watch: {\n    dialog: function(val){\n      if (val){\n        this.refreshInfo();\n      }\n    },\n  }\n}\n</script>"]}]}